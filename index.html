<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr-fr" lang="fr-fr" >
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="trio jeu calcul mental" />
		<meta name="author" content="J. Pavageau" />
		<meta name="description" content="Jeu de calcul mental en ligne" />
		<title>TRIO</title>
		<link href="favicon.png" rel="shortcut icon" type="" />
		<link rel="stylesheet" href="trio.css" type="text/css" />
		<link rel="stylesheet" href="yetii/yetii.css" type="text/css" />
	</head>

	<body >
			<script src="yetii/yetii-min.js" type="text/javascript"></script>
			<script src="jquery-3.2.1.min.js" type="text/javascript"></script>
           
<!-- The Modal -->
<div id="myModal" class="modal">
  <!-- Modal content -->
  <div id="conteneur_mymodal" class="modal-content">
    <span class="close">&times;</span>
	<div id="contenu_mymodal"><p>Some text in the Modal..</p></div>
  </div>
</div>

<CENTER><FORM name='FormPrio'>Choix du mode de jeu : <INPUT type='radio' name='radio_prio' value='originale' onclick='ChangePrio(0);' checked/>Règle d'origine (Multiplication puis addition ou soustraction)<INPUT type='radio' name='radio_prio' value='libre' onclick='ChangePrio(1);'/>Liberté totale (possibilité d'utiliser les 4 opérations +, -, x et :)</FORM></CENTER>

<script language="JavaScript">

// Fenêtre modale https://www.w3schools.com/howto/howto_css_modals.asp
var modal = document.getElementById('myModal');
// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];
// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}

function FermeModal() {modal.style.display = "none";}

function alertbox( boxTitre , boxTexte , boxHauteur , boxLargeur )
{  
	document.getElementById("conteneur_mymodal").style.width = boxLargeur+"px" ;
	document.getElementById("contenu_mymodal").innerHTML='<CENTER><B>'+boxTitre+'</B></CENTER><BR/>'+boxTexte+'<BR/><CENTER><input type="submit" name="valider" value="     OK     " onClick= "FermeModal();";/></CENTER>' ;
    modal.style.display = "block";
}

function fermeconfirmboxTRUE( fermeboxbool )
{  
	eviter_alert[fermeboxbool]=true;
	if (fermeboxbool=="erreur") { effacage_auto=true; document.FormConfig.form_effacage_auto.checked = true; }
	FermeModal();
}

function fermeconfirmboxFALSE( fermeboxbool )
{  
	eviter_alert[fermeboxbool]=false;
	FermeModal();
}

function confirmbox( boxTitre , boxTexte , boxHauteur , boxLargeur , boxbool)
{  
	document.getElementById("conteneur_mymodal").style.width = boxLargeur+"px" ;
	document.getElementById("contenu_mymodal").innerHTML = '<CENTER><B>'+boxTitre+'</B></CENTER><BR/>'+boxTexte+'<BR/><CENTER><input type="submit" name="valider" value="     OK     " onClick= "fermeconfirmboxFALSE(\''+boxbool+'\');"/> <input type="submit" name="valider" value=" ANNULER " onClick= "fermeconfirmboxTRUE(\''+boxbool+'\');"/></CENTER>' ;
    modal.style.display = "block";
}

 chemin="trio_fichiers/";

//prechargement des images
var img1 = new Image();img1.src=chemin+"cadrea.gif";  
var img2 = new Image();img2.src=chemin+"rond50.gif";  
var img3 = new Image();img3.src=chemin+"plus.gif";  
var img4 = new Image();img4.src=chemin+"moins.gif";  
var img5 = new Image();img5.src=chemin+"rond60.gif";
var img6 = new Image();img6.src=chemin+"rondv50.gif";
var img7 = new Image();img7.src=chemin+"rondv60.gif";  
var img8 = new Image();img8.src=chemin+"cache.gif";  
var img9 = new Image();img9.src=chemin+"diviser_vert.png";  
var img10 = new Image();img10.src=chemin+"fois_vert.png";  
var img11 = new Image();img11.src=chemin+"1.png";  
var img12 = new Image();img12.src=chemin+"2.png";  
var img13 = new Image();img13.src=chemin+"3.png";  
  
var TRIOjson  = {
  ScoreJson:0,
  JeuxJson:new Array(),
  PlateauJson:new Array(),
  CibleJson:0
}

function ajaxJSONPost(jsondata){
	var envoyer_mail = "non";
	if ((score[partie_actuelle]<=5)||(score[partie_actuelle]>=(ancien_score_sauvee+10))) {    
		envoyer_mail = "oui";
		ancien_score_sauvee=score[partie_actuelle];
	}
	jQuery.post(
							'sauvegarde.php',
							{
								login : document.FormChoix.Identifiant.value,
								pass : md5(document.FormChoix.Motdepasse.value),
								variante : partie_actuelle,
								etab : document.FormChoix.ListeEtab.value,
								mail : envoyer_mail,
								jsondatapost : JSON.stringify(jsondata)
							},
							function( data ) {
								if (data=="1") {
									//2014 CONCOURS CONCOURS CONCOURS CONCOURS CONCOURS CONCOURS CONCOURS si je change de concours alors le plus simple sera peut-être d'ajouter une nouvelle partie "Concours2", de modifier ce qui se passe ici dans ce "if", de laisser "Concours" comme il est en ce moment pour pouvoir le reprendre après mais en contre partie d'ajouter dans la suite ce que doit faire le script quand c'est "Concours2"
									if (FormChoix.ListeVariantes.selectedIndex == 4) { // pour le concours de la semaine des maths et les suivants
										alertbox("INFORMATION :","<CENTER>La participation au concours a bien été enregistrée.<BR/>Vous avez encore cependant jusqu'à<BR/> dimanche 19 mars 20h pour améliorer votre score.</CENTER>",150,320);
										//2015 alertbox("INFORMATION :","<CENTER>La participation au concours de test a bien été enregistrée mais le véritable concours ne commencera que le 14/03/2015.</CENTER>",170,320);
									} else {
										alertbox("INFORMATION :","<CENTER>La partie a bien été sauvegardée et le score a également<BR/> été transmis pour l'homologation d'un éventuel record.<BR/>Attention : la sauvegarde sera effacée lors de la prochaine rentrée scolaire.</CENTER>",160,450);
									};
								} else { 
									if (data=="3") {
										if (document.FormChoix.ListeEtab.value == "college") {
											alertbox("INFORMATION :","<CENTER>Sauf erreur, les identifiants n'appartiennent pas au collège.<BR/>La partie a donc été enregistrée dans l'espace visiteur.<BR/>Le score a également été transmis pour l'homologation d'un éventuel record.<BR/>Attention : la sauvegarde sera probablement effacée lors de<BR/>la prochaine rentrée scolaire voire plus tôt si nécessaire.</CENTER>",200,450);
										} else {
											if (document.FormChoix.ListeEtab.value == "sontpasdici") {
												alertbox("INFORMATION :","<CENTER>La partie a bien été enregistrée dans l'espace visiteur.<BR/>Le score a également été transmis pour l'homologation d'un éventuel record.<BR/>Attention : la sauvegarde sera probablement effacée lors de<BR/>la prochaine rentrée scolaire voire plus tôt si nécessaire.</CENTER>",180,450);
											} else {
												//2016 pour que les écoles aient le même genre de message que les collégiens
												if (FormChoix.ListeVariantes.selectedIndex == 4) {
													alertbox("INFORMATION :","<CENTER>La participation au concours a bien été enregistrée<BR/>dans l'espace réservé à l'école sélectionnée.<BR/>Vous avez encore cependant jusqu'à<BR/> dimanche 19 mars 20h pour améliorer votre score.</CENTER>",180,320);
													//2016 alertbox("INFORMATION :","<CENTER>La participation au concours de test a bien été enregistrée mais le véritable concours ne commencera que le 14/03/2015.</CENTER>",170,320);
												} else {
													alertbox("INFORMATION :","<CENTER>La partie a bien été enregistrée dans l'espace réservé à l'établissement sélectionné.<BR/>Le score a également été transmis pour l'homologation d'un éventuel record.<BR/>Attention : la sauvegarde sera probablement effacée lors de<BR/>la prochaine rentrée scolaire voire plus tôt si nécessaire.</CENTER>",180,520);
												}
											}
										}
									}
								}
							}
	).fail( function() { alertbox("AVERTISSEMENT :","<CENTER>Désolé mais la sauvegarde n'a pas fonctionné.</CENTER>",120,300); } );
}

var md5=(function(){function e(e,t){var o=e[0],u=e[1],a=e[2],f=e[3];o=n(o,u,a,f,t[0],7,-680876936);f=n(f,o,u,a,t[1],
12,-389564586);a=n(a,f,o,u,t[2],17,606105819);u=n(u,a,f,o,t[3],22,-1044525330);o=n(o,u,a,f,t[4],7,-176418897);f=n(f,o,u,a,t[5],
12,1200080426);a=n(a,f,o,u,t[6],17,-1473231341);u=n(u,a,f,o,t[7],22,-45705983);o=n(o,u,a,f,t[8],7,1770035416);f=n(f,o,u,a,t[9],
12,-1958414417);a=n(a,f,o,u,t[10],17,-42063);u=n(u,a,f,o,t[11],22,-1990404162);o=n(o,u,a,f,t[12],7,1804603682);f=n(f,o,u,a,t[13],
12,-40341101);a=n(a,f,o,u,t[14],17,-1502002290);u=n(u,a,f,o,t[15],22,1236535329);o=r(o,u,a,f,t[1],5,-165796510);f=r(f,o,u,a,t[6],
9,-1069501632);a=r(a,f,o,u,t[11],14,643717713);u=r(u,a,f,o,t[0],20,-373897302);o=r(o,u,a,f,t[5],5,-701558691);f=r(f,o,u,a,t[10],
9,38016083);a=r(a,f,o,u,t[15],14,-660478335);u=r(u,a,f,o,t[4],20,-405537848);o=r(o,u,a,f,t[9],5,568446438);f=r(f,o,u,a,t[14],
9,-1019803690);a=r(a,f,o,u,t[3],14,-187363961);u=r(u,a,f,o,t[8],20,1163531501);o=r(o,u,a,f,t[13],5,-1444681467);f=r(f,o,u,a,t[2],
9,-51403784);a=r(a,f,o,u,t[7],14,1735328473);u=r(u,a,f,o,t[12],20,-1926607734);o=i(o,u,a,f,t[5],4,-378558);f=i(f,o,u,a,t[8],
11,-2022574463);a=i(a,f,o,u,t[11],16,1839030562);u=i(u,a,f,o,t[14],23,-35309556);o=i(o,u,a,f,t[1],4,-1530992060);f=i(f,o,u,a,t[4],
11,1272893353);a=i(a,f,o,u,t[7],16,-155497632);u=i(u,a,f,o,t[10],23,-1094730640);o=i(o,u,a,f,t[13],4,681279174);f=i(f,o,u,a,t[0],
11,-358537222);a=i(a,f,o,u,t[3],16,-722521979);u=i(u,a,f,o,t[6],23,76029189);o=i(o,u,a,f,t[9],4,-640364487);f=i(f,o,u,a,t[12],
11,-421815835);a=i(a,f,o,u,t[15],16,530742520);u=i(u,a,f,o,t[2],23,-995338651);o=s(o,u,a,f,t[0],6,-198630844);f=s(f,o,u,a,t[7],
10,1126891415);a=s(a,f,o,u,t[14],15,-1416354905);u=s(u,a,f,o,t[5],21,-57434055);o=s(o,u,a,f,t[12],6,1700485571);f=s(f,o,u,a,t[3],
10,-1894986606);a=s(a,f,o,u,t[10],15,-1051523);u=s(u,a,f,o,t[1],21,-2054922799);o=s(o,u,a,f,t[8],6,1873313359);f=s(f,o,u,a,t[15],
10,-30611744);a=s(a,f,o,u,t[6],15,-1560198380);u=s(u,a,f,o,t[13],21,1309151649);o=s(o,u,a,f,t[4],6,-145523070);f=s(f,o,u,a,t[11],
10,-1120210379);a=s(a,f,o,u,t[2],15,718787259);u=s(u,a,f,o,t[9],21,-343485551);e[0]=m(o,e[0]);e[1]=m(u,e[1]);e[2]=m(a,e[2]);e[3]=m(f,e[3])}
function t(e,t,n,r,i,s){t=m(m(t,e),m(r,s));return m(t<<i|t>>>32-i,n)}function n(e,n,r,i,s,o,u){return t(n&r|~n&i,e,n,s,o,u)}
function r(e,n,r,i,s,o,u){return t(n&i|r&~i,e,n,s,o,u)}function i(e,n,r,i,s,o,u){return t(n^r^i,e,n,s,o,u)}
function s(e,n,r,i,s,o,u){return t(r^(n|~i),e,n,s,o,u)}function o(t){var n=t.length,r=[1732584193,-271733879,-1732584194,271733878],i;
for(i=64;i<=t.length;i+=64){e(r,u(t.substring(i-64,i)))}t=t.substring(i-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
for(i=0;i<t.length;i++)s[i>>2]|=t.charCodeAt(i)<<(i%4<<3);s[i>>2]|=128<<(i%4<<3);if(i>55){e(r,s);for(i=0;i<16;i++)s[i]=0}s[14]=n*8;e(r,s);return r}
function u(e){var t=[],n;for(n=0;n<64;n+=4){t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24)}return t}
function c(e){var t="",n=0;for(;n<4;n++)t+=a[e>>n*8+4&15]+a[e>>n*8&15];return t}
function h(e){for(var t=0;t<e.length;t++)e[t]=c(e[t]);return e.join("")}
function d(e){return h(o(unescape(encodeURIComponent(e))))}
function m(e,t){return e+t&4294967295}var a="0123456789abcdef".split("");return d})();

// ************** MES SCRIPTS **************
//
// Auteur : Julien PAVAGEAU  
// Dernière modification : 17/05/2017  

// déclaration des variables globales
  eviter_alert = new Array ;
  eviter_alert["changer_cible_unpourtoutes"] = false ; // elle passe à true quand l'alerte concernant l'utilisation de ce bouton dans la variante UnPourToutes a été ouverte une fois pour éviter qu'elle ne se rouvre à nouveau
  eviter_alert["verification_ok_classique"] = false ; // pour concours et unpourtoutes je n'affiche que tous les 10 trios
  eviter_alert["verification_ok_touspourune"] = false ;
  eviter_alert["verification_ok_classe"] = false ;
  eviter_alert["erreur"] = false ;
  // si debut_plateau = 1 alors on remplace la ligne 0 et la colonne 0 par les en-tête de ligne0 et colonne0
  debut_plateau = 1; ligne0 = "ABCDEFGHI"; colonne0 = "123456789";
  fin_plateau = 9;t_case = 50;
  nombres_relatifs = 0; // 0 pour n'avoir que des positifs et 1 pour avoir des relatifs
  // pour le concours (à noter qu'il faut que debut_plateau soit à 1) : comme pour json et la sauvegarde sur le site c'est la même variante (cela devrait éviter d'avoir à toucher trop au scripts) qui servira pour tous les "Concours" je placerai un code dans Plateau[0][0] pour éviter de charger un concours qui n'existe plus
//2014 et 2015 et 2016
  concours_actuel = "s_math_2017"; // à remplacer par s_math_2018 quand le concours commencera
  contenu_div_jeux ="";
  partie_actuelle="Classique";
  // quand le jeu est du type 1 à 90 alors il faut désactiver la mise à jour de affichage_score qui n'existe plus
  affichage_score_active = true;
  // Nouvelle fonctionnalité qui semble gourmande en ressource ?????
  cacher_case_active = true;
  // Pour cocher le 3ème nombre automatiquement quand il n'y a plus vraiment le choix après le deuxième
  cochage_auto = false; nombre3_coche_auto = false;
  // Nouvelles options d'ergonomie
  effacage_auto = false;
  verification_auto = false;
  cibles_possibles_uniquement = false;
  // on peut aller jusqu'à 90 mais il faut que le plateau contienne un alignement de trois 9
  limite_default=true;
  nombre_cible = new Array;
  nombre_cible["Classique"]=Math.round((50)*Math.random());
  // 0 au debut puis 1 qd 1er facteur choisi puis ... 3 qd terme choisi
  etape=0;
  score = new Array;
  score["Classique"]=0;
  score["UnPourToutes"]=0;
  score["TousPourUne"]=0;
  score["Classe"]=0;
  score["Concours"]=0;
// ["x_nombre1"] et ["y_nombre1"] contiennent x et y du 1er facteur ... ["y_nombre3"] ...
  Operation = new Array;
  // Operation[0] contient "+" ou "-" ou 0 au debut pour indiquer que le bouton n'a pas été cliqué
  Operation[0]="0";
  // Operation["fois"] permet de savoir quel est le signe de la première opération (utile depuis la variante "Libre"): 0 pour indiquer x, 1 pour +, 2 pour - et 3 pour :.
  Operation["fois"]=0;
  SigneOperationFois = new Array; SigneOperationFois[0]="x"; SigneOperationFois[1]="+"; SigneOperationFois[2]="-"; SigneOperationFois[3]=":";
  NumOperationFois = new Array; NumOperationFois["x"]=0; NumOperationFois["+"]=1; NumOperationFois["-"]=2; NumOperationFois[":"]=3;
  // les deux initialisations ci-dessous sont devenues nécessaires depuis l'arrivée de la formule libre pour gérer le double "reclic" sur le dernier nombre choisi (je peux faire un test même si l'étape est égale à 0)
  Operation["x_nombre0"]=100;
  Operation["y_nombre0"]=100;
// Jeux[partie_actuelle][0] contient le nombre de jeux validés, Jeux[partie_actuelle][1] est un tableau qui contient un tableau identique à Opération concernant le 1er jeu validé, Jeux[2] .... 2ème jeu validé....
  Jeux = new Array;
  Jeux["Classique"] = new Array;
  Jeux["Classique"][0] = 0;
  Jeux["UnPourToutes"] = new Array;
  Jeux["UnPourToutes"][0] = 0;
  Jeux["TousPourUne"] = new Array;
  Jeux["TousPourUne"][0] = 0;
  Jeux["Classe"] = new Array;
  Jeux["Classe"][0] = 0;
  Jeux["Concours"] = new Array;
  Jeux["Concours"][0] = 0;
  Repartition_originale = new Array;
  Repartition_originale = [1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,8,8,8,8,8,9,9,9,9];
  x_trio = 1;y_trio = 1;test_trio = 0;trio_montre = false;
  repartition_originale_bool = false; // nouvelle gestion depuis que le choix est fait dans un menu déroulant
  ancien_score_sauvee = 0; // pour éviter de recevoir plusieurs mails quand le joueur clique plusieurs fois sur SAUVER

function Repartition(plat) {
  var Repartition_bis = new Array;
  for (var i = 0; i <= 48; i++) {
    Repartition_bis[i] = Math.floor(Math.random()*1000)*10+Repartition_originale[i];
  }
  Repartition_bis.sort();
  for (var c = 1; c <= 7; c++) {
    for (var l = 1; l <= 7; l++) {
      plat[c][l] = Repartition_bis[c-1+7*(l-1)]% 10;
    }
  }
}

function Limite_cible() {
  if (limite_default) { return 50; }
  else { return document.FormChoix.limite_cible_form.value; }
}

function bornes_change() {
  document.FormChoix.limite_cible_form.value = document.FormConfig.borne_sup.value*document.FormConfig.borne_sup.value+Math.abs(document.FormConfig.borne_sup.value);
  limite_default=false;
  RecommencerLesParties(10);  
  document.FormChoix.radio_limite_cible[1].checked = true;
}

function CopierTableauOperation(TabOriginal,TabCopie) {
  TabCopie[0] = TabOriginal[0];
  TabCopie["x_nombre1"] = TabOriginal["x_nombre1"];
  TabCopie["y_nombre1"] = TabOriginal["y_nombre1"];
  TabCopie["x_nombre2"] = TabOriginal["x_nombre2"];
  TabCopie["y_nombre2"] = TabOriginal["y_nombre2"];
  TabCopie["x_nombre3"] = TabOriginal["x_nombre3"];
  TabCopie["y_nombre3"] = TabOriginal["y_nombre3"];
  TabCopie["fois"] = TabOriginal["fois"];
}

function Initialisation() {
// Resultat["Classique"][0][0] contient le nombre jeux validés ayant pour résultat 0 dans la variante "Classique", Resultat["Classique"][0][1] contient le numéro dans Jeux de cette combinaison ... jusqu'à au moins Resultat["Classique"][90]
  Resultat = new Array;
  Resultat["Classique"] = new Array;
// Contient les nombres du plateau
  Plateau = new Array;
  Plateau["Classique"] = new Array;
  Grille = new Array;
  for (var c = 0; c <= 9; c++) {
    Plateau["Classique"][c] = new Array;
    Grille[c] = new Array;
    for (var l = 0; l <= 9; l++) {
    Grille[c][l]=false;
    Plateau["Classique"][c][l]=Math.pow(-1,nombres_relatifs*Math.floor((2)*Math.random()+1))*Math.floor((9)*Math.random()+1);
    // Resultat["Classique"] est initialisé ci-dessous de [-99] jusqu'à [99] même si on ne peut dépasser 9*9+9=90
    Resultat["Classique"][l*10+c] = new Array;
    Resultat["Classique"][l*10+c][0] = 0;
    Resultat["Classique"][(-1)*(l*10+c)] = new Array;
    Resultat["Classique"][(-1)*(l*10+c)][0] = 0;
    }
  }
  if (debut_plateau == 1) { EnleverLigne0Colonne0(Plateau[partie_actuelle],Grille); }
}

function NouvelleCible() {
  var newcible = Math.pow(-1,nombres_relatifs*Math.floor((2)*Math.random()+1))*Math.round((Limite_cible())*Math.random());
  if (((cibles_possibles_uniquement) && (partie_actuelle != "UnPourToutes")) && (partie_actuelle != "Concours")) {
  var limite = Math.min(document.FormConfig.borne_sup.value*document.FormConfig.borne_sup.value+Math.abs(document.FormConfig.borne_sup.value),Limite_cible());
  newcible = Math.pow(-1,nombres_relatifs*Math.floor((2)*Math.random()+1))*Math.round((limite)*Math.random());
  var compteur = 0;
  while ((CiblesPossibles[newcible]<document.FormConfig.min_cibles.value) && (compteur<(limite*limite))) {
  compteur++;
    newcible = Math.pow(-1,nombres_relatifs*Math.floor((2)*Math.random()+1))*Math.round((limite)*Math.random());
    }
  }
  if (compteur==(limite*limite)) {
  var max_trios = 0;
    for (var i = ((-1)*nombres_relatifs*limite); i <= limite; i++) {
    if (CiblesPossibles[i]>max_trios) { max_trios=CiblesPossibles[i]; newcible = i; }
    }
    alertbox("AVERTISSEMENT :","<CENTER>Aucune cible ne peut plus être atteinte par "+document.FormConfig.min_cibles.value+" trios.<BR/>La limite pour ce plateau est à présent de "+max_trios+" trios.<BR/>La cible proposée correspond à ce maximum.</CENTER>",180,470);
  }
  return newcible;
}

function VoirNombreTrios() {
  if (((partie_actuelle=="Classe") || (md5(document.FormChoix.Motdepasse.value)=="36d6ce1013b27a56e9b5f67f296c7fdb")) || ((md5(document.FormChoix.Motdepasse.value)=="b8c55fe0e6e7cb11680fbb8525cc75c5") && (Plateau[partie_actuelle][0][1]=="A"))) {
    var limite = Math.min(document.FormConfig.borne_sup.value*document.FormConfig.borne_sup.value+Math.abs(document.FormConfig.borne_sup.value),Limite_cible());
    var contenu_alert_debut = "<CENTER><div style='overflow:auto; width:400px; height:80;'><TABLE cellpadding=0 cellspacing=0  border=1><tbody><TR valign='middle' align='center'><TD height=30 width=150><DIV style='width:150px;'><CENTER><span style='font-size: 12pt'>CIBLES</span></CENTER></DIV></TD>";
    var contenu_alert_fin = "</TR><TR valign='middle' align='center'><TD height=30 width=100><CENTER><span style='font-size: 12pt'>Nombres de TRIOS</span></CENTER></TD>";
    ChercherCiblesPossibles();
    for (var i = ((-1)*nombres_relatifs*limite); i <= limite; i++) {
      contenu_alert_debut+="<TD height=30 width=30><DIV style='width:30px;'><CENTER><span style='font-size: 12pt'>"+i+"</span></CENTER></DIV></TD>";
      contenu_alert_fin+="<TD height=30 width=30><CENTER><span style='font-size: 12pt'>"+CiblesPossibles[i]+"</span></CENTER></TD>";
    }
    contenu_alert_fin+="</TR></tbody></TABLE></div></CENTER>";
    alertbox("INFORMATION :","<CENTER>Ci-dessous le nombre de trios restants (cible par cible) :</CENTER><br/>"+contenu_alert_debut+contenu_alert_fin,210,420);
    }
  else {
    alertbox("AVERTISSEMENT :","<CENTER>Cette option n'est pas valable pour cette variante !</CENTER>",120,360);
  }
}

function VoirTrio() { //  x_trio = 1;y_trio = 1;test_trio = 0;
  if (((partie_actuelle=="Classe") || (md5(document.FormChoix.Motdepasse.value)=="36d6ce1013b27a56e9b5f67f296c7fdb")) || ((md5(document.FormChoix.Motdepasse.value)=="b8c55fe0e6e7cb11680fbb8525cc75c5") && (Plateau[partie_actuelle][0][1]=="A"))) {
      var pas_trouve = true;
      if (x_trio>fin_plateau) { x_trio = 1; } // au cas où le dernier test aurait été fait sur un plateau plus grand
      if (y_trio>fin_plateau) { y_trio = 1; }
      var c = x_trio;
      var  l = y_trio;
      var x1 = 0; var y1 = 0;
      var x2 = 0; var y2 = 0;
      var nb_boucle = 0;
      while ((pas_trouve) && (nb_boucle<=(fin_plateau*fin_plateau+1))){
        nb_boucle++;
        if (coordOK(c-1,l-1)) {
          if ((coordOK(c-2,l-2)) && (1>test_trio)) { // test 1
            test_trio = 1;
            x1 = c-1; y1 = l-1;
            x2 = c-2; y2 = l-2;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
          }
          if (((coordOK(c+1,l+1)) && (2>test_trio)) && (pas_trouve)) {
            test_trio = 2;
            x1 = c-1; y1 = l-1;
            x2 = c+1; y2 = l+1;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
          }
        }
        if (coordOK(c-1,l)) {
          if (((coordOK(c-2,l)) && (3>test_trio)) && (pas_trouve)) {
            test_trio = 3;
            x1 = c-1; y1 = l;
            x2 = c-2; y2 = l;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
          }
          if (((coordOK(c+1,l)) && (4>test_trio)) && (pas_trouve)) {
            test_trio = 4;
            x1 = c-1; y1 = l;
            x2 = c+1; y2 = l;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
          }
        }
        if (coordOK(c,l-1)) {
          if (((coordOK(c,l-2)) && (5>test_trio)) && (pas_trouve)) {
            test_trio = 5;
            x1 = c; y1 = l-1;
            x2 = c; y2 = l-2;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
          }
          if (((coordOK(c,l+1)) && (6>test_trio)) && (pas_trouve)) {
            test_trio = 6;
            x1 = c; y1 = l-1;
            x2 = c; y2 = l+1;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
          }
        }
        if (coordOK(c+1,l-1)) {
          if (((coordOK(c+2,l-2)) && (7>test_trio)) && (pas_trouve)) {
            test_trio = 7;
            x1 = c+1; y1 = l-1;
            x2 = c+2; y2 = l-2;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
          }
          if (((coordOK(c-1,l+1)) && (8>test_trio)) && (pas_trouve)) {
            test_trio = 8;
            x1 = c+1; y1 = l-1;
            x2 = c-1; y2 = l+1;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
          }
        }
        if (((coordOK(c+2,l)) && (coordOK(c+1,l))) && ((9>test_trio) && (pas_trouve))) {
            test_trio = 9;
            x1 = c+2; y1 = l;
            x2 = c+1; y2 = l;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
        }
        if (((coordOK(c+2,l+2)) && (coordOK(c+1,l+1))) && ((10>test_trio) && (pas_trouve))) {
            test_trio = 10;
            x1 = c+2; y1 = l+2;
            x2 = c+1; y2 = l+1;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
        }
        if (((coordOK(c,l+2)) && (coordOK(c,l+1))) && ((11>test_trio) && (pas_trouve))) {
            test_trio = 11;
            x1 = c; y1 = l+2;
            x2 = c; y2 = l+1;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
        }
        if (((coordOK(c-1,l+1)) && (coordOK(c-2,l+2))) && ((12>test_trio) && (pas_trouve))) {
            test_trio = 12;
            x1 = c-1; y1 = l+1;
            x2 = c-2; y2 = l+2;
            if ((nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]+Plateau[partie_actuelle][c][l]) || (nombre_cible[partie_actuelle] == Plateau[partie_actuelle][x1][y1]*Plateau[partie_actuelle][x2][y2]-Plateau[partie_actuelle][c][l])) { pas_trouve = false; }
        }
        if (pas_trouve) {
          test_trio = 0;
          c++;
          if (c>fin_plateau) { c = 1; if (l==fin_plateau) { l = 1; } else { l++; } }
        }
      }
      if (pas_trouve) {
        alertbox("INFORMATION :","<CENTER>Aucun trio ne peut atteindre cette cible dans cette grille.</CENTER>",120,360);
      }
      else {
        Effacer();
        trio_montre = true;
        x_trio = c;  y_trio = l;
        for (var x = debut_plateau; x <= fin_plateau; x++) {
          for (var y = debut_plateau; y <= fin_plateau; y++) {
            if (((x==x_trio) && (y==y_trio)) || (((x==x1) && (y==y1)) || ((x==x2) && (y==y2)))) {
              Grille[x][y] = false ;
              window.document.images["vide"+x+y].src=chemin+"vide.gif";
            }
            else {
              Grille[x][y] = true ;
              window.document.images["vide"+x+y].src=chemin+"cache.gif";
            
            }
        }}
      }
  }
  else {
    alertbox("AVERTISSEMENT :","<CENTER>Cette option n'est pas valable pour cette variante !</CENTER>",120,360);
  }
}

function coordOK(x,y) {
 if (((x<=fin_plateau) && (x>=1)) && ((y<=fin_plateau) && (y>=1))) { return true; }
 else { return false; }
}

function ChercherCiblesPossibles() {
  var max_trio = 0;
  var lim_sup = document.FormConfig.borne_sup.value*document.FormConfig.borne_sup.value+Math.abs(document.FormConfig.borne_sup.value);
  CiblesPossibles = new Array;
  for (var n = -lim_sup; n <= lim_sup; n++) {
  CiblesPossibles[n] = 0;
  }
  for (var c = 1; c <= fin_plateau; c++) {
    for (var l = 1; l <= fin_plateau; l++) {
    if (coordOK(c-1,l-1)) {
      if (coordOK(c-2,l-2)) {
        CiblesPossibles[Plateau[partie_actuelle][c-1][l-1]*Plateau[partie_actuelle][c-2][l-2]+Plateau[partie_actuelle][c][l]]++;
        CiblesPossibles[Plateau[partie_actuelle][c-1][l-1]*Plateau[partie_actuelle][c-2][l-2]-Plateau[partie_actuelle][c][l]]++;
      }
      if (coordOK(c+1,l+1)) {
        CiblesPossibles[Plateau[partie_actuelle][c-1][l-1]*Plateau[partie_actuelle][c+1][l+1]+Plateau[partie_actuelle][c][l]]++;
        CiblesPossibles[Plateau[partie_actuelle][c-1][l-1]*Plateau[partie_actuelle][c+1][l+1]-Plateau[partie_actuelle][c][l]]++;
      }
    }
    if (coordOK(c-1,l)) {
      if (coordOK(c-2,l)) {
        CiblesPossibles[Plateau[partie_actuelle][c-1][l]*Plateau[partie_actuelle][c-2][l]+Plateau[partie_actuelle][c][l]]++;
        CiblesPossibles[Plateau[partie_actuelle][c-1][l]*Plateau[partie_actuelle][c-2][l]-Plateau[partie_actuelle][c][l]]++;
      }
      if (coordOK(c+1,l)) {
        CiblesPossibles[Plateau[partie_actuelle][c-1][l]*Plateau[partie_actuelle][c+1][l]+Plateau[partie_actuelle][c][l]]++;
        CiblesPossibles[Plateau[partie_actuelle][c-1][l]*Plateau[partie_actuelle][c+1][l]-Plateau[partie_actuelle][c][l]]++;
      }
    }
    if (coordOK(c,l-1)) {
      if (coordOK(c,l-2)) {
        CiblesPossibles[Plateau[partie_actuelle][c][l-1]*Plateau[partie_actuelle][c][l-2]+Plateau[partie_actuelle][c][l]]++;
        CiblesPossibles[Plateau[partie_actuelle][c][l-1]*Plateau[partie_actuelle][c][l-2]-Plateau[partie_actuelle][c][l]]++;
      }
      if (coordOK(c,l+1)) {
        CiblesPossibles[Plateau[partie_actuelle][c][l-1]*Plateau[partie_actuelle][c][l+1]+Plateau[partie_actuelle][c][l]]++;
        CiblesPossibles[Plateau[partie_actuelle][c][l-1]*Plateau[partie_actuelle][c][l+1]-Plateau[partie_actuelle][c][l]]++;
      }
    }
    if (coordOK(c+1,l-1)) {
      if (coordOK(c+2,l-2)) {
        CiblesPossibles[Plateau[partie_actuelle][c+1][l-1]*Plateau[partie_actuelle][c+2][l-2]+Plateau[partie_actuelle][c][l]]++;
        CiblesPossibles[Plateau[partie_actuelle][c+1][l-1]*Plateau[partie_actuelle][c+2][l-2]-Plateau[partie_actuelle][c][l]]++;
      }
      if (coordOK(c-1,l+1)) {
        CiblesPossibles[Plateau[partie_actuelle][c+1][l-1]*Plateau[partie_actuelle][c-1][l+1]+Plateau[partie_actuelle][c][l]]++;
        CiblesPossibles[Plateau[partie_actuelle][c+1][l-1]*Plateau[partie_actuelle][c-1][l+1]-Plateau[partie_actuelle][c][l]]++;
      }
    }
    if ((coordOK(c+2,l)) && (coordOK(c+1,l))) {
      CiblesPossibles[Plateau[partie_actuelle][c+2][l]*Plateau[partie_actuelle][c+1][l]+Plateau[partie_actuelle][c][l]]++;
      CiblesPossibles[Plateau[partie_actuelle][c+2][l]*Plateau[partie_actuelle][c+1][l]-Plateau[partie_actuelle][c][l]]++; }
    if ((coordOK(c+2,l+2)) && (coordOK(c+1,l+1))) {
      CiblesPossibles[Plateau[partie_actuelle][c+2][l+2]*Plateau[partie_actuelle][c+1][l+1]+Plateau[partie_actuelle][c][l]]++;
      CiblesPossibles[Plateau[partie_actuelle][c+2][l+2]*Plateau[partie_actuelle][c+1][l+1]-Plateau[partie_actuelle][c][l]]++; }
    if ((coordOK(c,l+2)) && (coordOK(c,l+1))) {
      CiblesPossibles[Plateau[partie_actuelle][c][l+2]*Plateau[partie_actuelle][c][l+1]+Plateau[partie_actuelle][c][l]]++;
      CiblesPossibles[Plateau[partie_actuelle][c][l+2]*Plateau[partie_actuelle][c][l+1]-Plateau[partie_actuelle][c][l]]++; }
    if ((coordOK(c-1,l+1)) && (coordOK(c-2,l+2))) {
      CiblesPossibles[Plateau[partie_actuelle][c-1][l+1]*Plateau[partie_actuelle][c-2][l+2]+Plateau[partie_actuelle][c][l]]++;
      CiblesPossibles[Plateau[partie_actuelle][c-1][l+1]*Plateau[partie_actuelle][c-2][l+2]-Plateau[partie_actuelle][c][l]]++; }
    }
  }
//  var verification = 0;
  for (var n = -lim_sup; n <= lim_sup; n++) {
if (Math.abs(n)<91) { // sinon pour l'instant ça poserait des problèmes à cause de résultat[] qui ne dépasse pas 90
  CiblesPossibles[n] = CiblesPossibles[n] - Resultat[partie_actuelle][n][0];
}
  if (max_trio<CiblesPossibles[n]) { max_trio = CiblesPossibles[n]; }
//  verification = verification + CiblesPossibles[n]
  }
  if ((document.FormConfig.min_cibles.value>max_trio) && (cibles_possibles_uniquement)) {
    alertbox("AVERTISSEMENT :","<CENTER>Aucune cible ne peut être atteinte par "+document.FormConfig.min_cibles.value+" trios.<BR/>La limite pour ce plateau est de "+max_trio+" trios.<BR/>Il est fortement recommandé de fixer cette option bien en dessous.</CENTER>",180,470);
  document.FormConfig.min_cibles.value = max_trio;
  }
//  alert(verification+" "+max_trio);
}

function Basculer_cibles_possibles_uniquement() {
  if (cibles_possibles_uniquement) {
  cibles_possibles_uniquement = false;
  }
  else {
    cibles_possibles_uniquement = true;
  if (((cibles_possibles_uniquement) && (partie_actuelle != "UnPourToutes")) && (partie_actuelle != "Concours")) { ChercherCiblesPossibles(); }
  }
}

function EnleverLigne0Colonne0(Plateau_temp,Grille_temp) {
  Grille_temp[0][0]=true;
  Plateau_temp[0][0]="";
  for (var k = 1; k <= 9; k++) {
  Grille_temp[k][0]=true;
  Grille_temp[0][k]=true;
  Plateau_temp[k][0]=ligne0.charAt(k-1);
  Plateau_temp[0][k]=colonne0.charAt(k-1);
  }
}

function Effacer() {
// on laisse le signe pour l'instant  Operation[0]="0";
  if (etape>0) { image_cliquee_1.src=chemin+"vide.gif"; }
  if (etape>1) { image_cliquee_2.src=chemin+"vide.gif"; }
  if (etape>2) { image_cliquee_3.src=chemin+"vide.gif"; }
  etape=0;
  nombre3_coche_auto = false;
  for (var c = debut_plateau; c <= fin_plateau; c++) {
    for (var l = debut_plateau; l <= fin_plateau; l++) {
      Grille[c][l]=false;
    if ((cacher_case_active) || (trio_montre)) { window.document.images["vide"+c+l].src=chemin+"vide.gif"; }
    }
  }
  if (trio_montre) { trio_montre=false; }
  document.getElementById("nombre1").firstChild.nodeValue="?";
  document.getElementById("nombre2").firstChild.nodeValue="?";
  document.getElementById("nombre3").firstChild.nodeValue="?";
}

function Change_form_divJeux() {
  if ((form_divJeux.affichage.checked)&&(contenu_div_jeux != "")) { document.getElementById("divJeux").style.height="290px"; }
  else {
    if ((form_divJeux.affichage.checked)&&(contenu_div_jeux == "")) { document.getElementById("divJeux").style.height="auto"; }
    else { document.getElementById("divJeux").style.height="0px"; }
  }
}

function AjouterDivJeux(numero,resultat) {
  contenu_div_jeux += "<td width=230px><DIV style='width:230px;'><CENTER><span style='font-size: 20pt'><u>Trio n°"+numero+"</u></span></CENTER><TABLE cellpadding=0 cellspacing=0  border=0>";
  var min_x = Math.min(Jeux[partie_actuelle][numero]["x_nombre1"],Math.min(Jeux[partie_actuelle][numero]["x_nombre2"],Jeux[partie_actuelle][numero]["x_nombre3"]));
  var min_y = Math.min(Jeux[partie_actuelle][numero]["y_nombre1"],Math.min(Jeux[partie_actuelle][numero]["y_nombre2"],Jeux[partie_actuelle][numero]["y_nombre3"]));
  if (Jeux[partie_actuelle][numero]["x_nombre1"] == Jeux[partie_actuelle][numero]["x_nombre2"]) { if (min_x>debut_plateau) { min_x--; if (min_x == 8) { min_x--; }}; }
  else { if (Jeux[partie_actuelle][numero]["y_nombre1"] == Jeux[partie_actuelle][numero]["y_nombre2"]) { if (min_y>debut_plateau) { min_y--; if (min_y == 8) { min_y--; }}; } }
    contenu_div_jeux+="<TR valign='middle' align='center'><TD height=50px width=50px background='"+chemin+"vide.gif'></TD>";
    for (var c = min_x; c <= (min_x+2); c++) {
    contenu_div_jeux+="<TD height=50px width=50px background='"+chemin+"vide.gif'><CENTER><span style='font-size: 16pt'><B>"+Plateau[partie_actuelle][c][0]+"</B></span></CENTER></TD>";
    }
    contenu_div_jeux+="</TR>";
  for (var l = min_y; l <= (min_y+2); l++) {
    contenu_div_jeux+="<TR valign='middle' align='center'><TD height=50px width=50px background='"+chemin+"vide.gif'><CENTER><span style='font-size: 16pt'><B>"+Plateau[partie_actuelle][0][l]+"</B></span></CENTER></TD>";
    for (var c = min_x; c <= (min_x+2); c++) {
      contenu_div_jeux+="<TD height=50px width=50px background='"+chemin;
      if (((Jeux[partie_actuelle][numero]["x_nombre1"]==c)&&(Jeux[partie_actuelle][numero]["y_nombre1"]==l)) || ((Jeux[partie_actuelle][numero]["x_nombre2"]==c)&&(Jeux[partie_actuelle][numero]["y_nombre2"]==l))  || ((Jeux[partie_actuelle][numero]["x_nombre3"]==c)&&(Jeux[partie_actuelle][numero]["y_nombre3"]==l))) {
        if ((Jeux[partie_actuelle][numero]["x_nombre3"]==c)&&(Jeux[partie_actuelle][numero]["y_nombre3"]==l)) { contenu_div_jeux+="fond50_rondv.gif"; } else { contenu_div_jeux+="fond50_rond.gif"; }
      }
      else {
        contenu_div_jeux+="fond50.gif";
      }
      contenu_div_jeux+="'><CENTER><span style='font-size: 20pt'>"+Plateau[partie_actuelle][c][l]+"</span></CENTER></TD>";
    }
    contenu_div_jeux+="</TR>";
  }
  contenu_div_jeux+="</TABLE><BR/><CENTER><span style='font-size: 20pt'>"+resultat+" = ("+Plateau[partie_actuelle][Jeux[partie_actuelle][numero]["x_nombre1"]][Jeux[partie_actuelle][numero]["y_nombre1"]]+" "+SigneOperationFois[Jeux[partie_actuelle][numero]["fois"]]+" "+Plateau[partie_actuelle][Jeux[partie_actuelle][numero]["x_nombre2"]][Jeux[partie_actuelle][numero]["y_nombre2"]]+") "+Jeux[partie_actuelle][numero][0]+" "+Plateau[partie_actuelle][Jeux[partie_actuelle][numero]["x_nombre3"]][Jeux[partie_actuelle][numero]["y_nombre3"]]+"</span></CENTER></DIV></TD>";
// avant la modif je faisais ça ici :  document.getElementById('divJeux').innerHTML = "<table border='0'><tbody><tr valign='middle'>"+contenu_div_jeux+"</TR></tbody></table>";
  document.getElementById("divJeux").style.height="290px"; // pour éviter l'ascenseur vertical
}

function Verifier_automatiquement() {
  var resultat_operation = Plateau[partie_actuelle][Operation["x_nombre1"]][Operation["y_nombre1"]]*Plateau[partie_actuelle][Operation["x_nombre2"]][Operation["y_nombre2"]];
  if (nombre_cible[partie_actuelle] == (resultat_operation + Plateau[partie_actuelle][Operation["x_nombre3"]][Operation["y_nombre3"]])) { Operation[0]="+"; Verifier(); }
  else {
  if (nombre_cible[partie_actuelle] == (resultat_operation - Plateau[partie_actuelle][Operation["x_nombre3"]][Operation["y_nombre3"]])) { Operation[0]="-"; Verifier(); }
  else { alertbox('AVERTISSEMENT :','<CENTER>Le résultat ne peut être égal au nombre cible !</CENTER>',120,300); Effacer(); }
  }
}

function Basculer_verification_automatiquement() {
  if (verification_auto) {
  verification_auto = false;
  Operation[0]="0";
  }
  else {
    verification_auto = true;
  // si on est en mode libre je laisse vérification auto s'activer mais je ne change pas le signe et je fais en sorte qu'elle ne fonctionne pas vraiment tant qu'on ne reclic pas sur le mode original 
  if (!(document.FormPrio.radio_prio[1].checked)) { window.document.images["image_plusmoins"].src=chemin+"plusmoins.gif"; }
  }
}

function Verifier() {
  if ((Operation[0]=="0")||(etape!=3)) {
if (etape!=3) {alertbox('AVERTISSEMENT :','<CENTER>Il faut sélectionner 3 nombres !</CENTER>',120,300);}
else {alertbox("AVERTISSEMENT :","<CENTER>Il faut choisir entre + et -<BR/>en cliquant sur l'opération +/- !</CENTER>",140,300);}
  }
  else {
//la division par zéro ne semblant pas poser de problème (résultat = infinity) je ne gère pas ce cas de figure
    var resultat_operation = ((Operation["fois"]-1)*(Operation["fois"]-2)*(Operation["fois"]-3)/(-6))*Plateau[partie_actuelle][Operation["x_nombre1"]][Operation["y_nombre1"]]*Plateau[partie_actuelle][Operation["x_nombre2"]][Operation["y_nombre2"]]+(Operation["fois"]*(Operation["fois"]-2)*(Operation["fois"]-3)/2)*(Plateau[partie_actuelle][Operation["x_nombre1"]][Operation["y_nombre1"]]+Plateau[partie_actuelle][Operation["x_nombre2"]][Operation["y_nombre2"]])+(Operation["fois"]*(Operation["fois"]-1)*(Operation["fois"]-3)/(-2))*(Plateau[partie_actuelle][Operation["x_nombre1"]][Operation["y_nombre1"]]-Plateau[partie_actuelle][Operation["x_nombre2"]][Operation["y_nombre2"]])+(Operation["fois"]*(Operation["fois"]-1)*(Operation["fois"]-2)/6)*(Plateau[partie_actuelle][Operation["x_nombre1"]][Operation["y_nombre1"]]/Plateau[partie_actuelle][Operation["x_nombre2"]][Operation["y_nombre2"]]);
    if (Operation[0]=="+") { resultat_operation += Plateau[partie_actuelle][Operation["x_nombre3"]][Operation["y_nombre3"]]; }
    else if (Operation[0]=="-") { resultat_operation -= Plateau[partie_actuelle][Operation["x_nombre3"]][Operation["y_nombre3"]]; }
    else if (Operation[0]=="x") { resultat_operation *= Plateau[partie_actuelle][Operation["x_nombre3"]][Operation["y_nombre3"]]; }
    else if (Operation[0]==":") { resultat_operation /= Plateau[partie_actuelle][Operation["x_nombre3"]][Operation["y_nombre3"]]; }
    if (resultat_operation!=nombre_cible[partie_actuelle]) {alertbox("AVERTISSEMENT :","<CENTER>Le résultat de l'opération<BR/>n'est pas égal au nombre cible !</CENTER>",140,300);}
    else {
      combinaison_deja_proposee=false;
//j'ai pour l'instant (08/2016) fait le choix de ne pas gérer les doublons quand la cible dépasse 90 car il faudrait trouver une autre solution que celle que j'ai adoptée et en plus l'utilité est très limitée car cela ne peut se produire qu'avec le nouveau mode Liberté totale ou si on augmente les nombres de la grille
if (Math.abs(nombre_cible[partie_actuelle])<91) {
      var rang = 0;
      while ((rang<Resultat[partie_actuelle][nombre_cible[partie_actuelle]][0])&&(combinaison_deja_proposee==false)) {
        rang++;
        if ((((((((Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["x_nombre1"]==Operation["x_nombre1"])&&(Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["x_nombre2"]==Operation["x_nombre2"]))&&(Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["y_nombre1"]==Operation["y_nombre1"]))&&(Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["y_nombre2"]==Operation["y_nombre2"]))) || (((((Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["x_nombre1"]==Operation["x_nombre2"])&&(Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["x_nombre2"]==Operation["x_nombre1"]))&&(Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["y_nombre1"]==Operation["y_nombre2"]))&&(Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["y_nombre2"]==Operation["y_nombre1"])))) && ((Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["x_nombre3"]==Operation["x_nombre3"])&&(Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["y_nombre3"]==Operation["y_nombre3"]))) && ((Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]]["fois"]==Operation["fois"])&&(Jeux[partie_actuelle][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]][0]==Operation[0]))) {
          combinaison_deja_proposee=true;
        }
      }
}
      if (combinaison_deja_proposee) {
  alertbox("AVERTISSEMENT :","<CENTER>Ce trio a déjà été proposé lors du jeu n°"+Resultat[partie_actuelle][nombre_cible[partie_actuelle]][rang]+".<BR/>Il faut donc en trouver un nouveau.</CENTER>",140,350);}
      else {
        Jeux[partie_actuelle][0]++;
        Jeux[partie_actuelle][Jeux[partie_actuelle][0]] = new Array;
        CopierTableauOperation(Operation,Jeux[partie_actuelle][Jeux[partie_actuelle][0]]);
if (Math.abs(nombre_cible[partie_actuelle])<91) {
        Resultat[partie_actuelle][nombre_cible[partie_actuelle]][0]++;
        Resultat[partie_actuelle][nombre_cible[partie_actuelle]][Resultat[partie_actuelle][nombre_cible[partie_actuelle]][0]] = Jeux[partie_actuelle][0];
}
        if (form_divJeux.affichage.checked) {
          AjouterDivJeux(Jeux[partie_actuelle][0],nombre_cible[partie_actuelle]);
          document.getElementById('divJeux').innerHTML = "<table border='0'><tbody><tr valign='middle'>"+contenu_div_jeux+"</TR></tbody></table>";
        }
        if (((cibles_possibles_uniquement) && (partie_actuelle != "UnPourToutes")) && (partie_actuelle != "Concours")) { CiblesPossibles[nombre_cible[partie_actuelle]]--; }
        if  (partie_actuelle=="Classique") {
          var points_gagnes=0;
      if ((Operation["fois"]==0) && ((Operation[0]=="+") || (Operation[0]=="-"))) { 
      if (Math.abs(nombre_cible[partie_actuelle])<51) {
        points_gagnes=2;
      }
      else {
        if (Math.abs(nombre_cible[partie_actuelle])<81) { // au delà il n'y a qu'un trio valide (sans tenir compte des permutations)
          points_gagnes=3;
        }
        else {
          points_gagnes=4;
          if (Math.abs(nombre_cible[partie_actuelle]==90)) { points_gagnes++; }
        }
      }
      } else { points_gagnes=1; }
          score[partie_actuelle]+=points_gagnes;
          document.getElementById("affichage_score").firstChild.nodeValue=score[partie_actuelle];
          if (eviter_alert["verification_ok_classique"] == false) { eviter_alert["verification_ok_classique"] = true ; alertbox("BRAVO !","<CENTER>"+points_gagnes+" points de plus.<BR/>Cette information ne s'affichera plus à l'avenir<BR/>mais le score sera augmenté de 1 à 5 points<BR/>lors du prochain trio validé.</CENTER>",190,340);}
          nombre_cible[partie_actuelle]=NouvelleCible();
          document.getElementById("affichage_resultat").firstChild.nodeValue=nombre_cible[partie_actuelle];
        }
        else { if ((partie_actuelle=="TousPourUne") || (partie_actuelle=="Classe")) {
          if (partie_actuelle=="TousPourUne") {
            score[partie_actuelle]+=1;
            document.getElementById("affichage_score").firstChild.nodeValue=score[partie_actuelle];
            if (eviter_alert["verification_ok_touspourune"] == false) { eviter_alert["verification_ok_touspourune"] = true ; alertbox("BRAVO !","<CENTER>1 point de plus.<BR/>Cette information ne sera plus affichée à l'avenir<BR/>mais le score continuera à augmenter<BR/> pour chaque nouveau trio trouvé.</CENTER>",200,340);}
          }
          else {
            if (eviter_alert["verification_ok_classe"] == false) { confirmbox( "BRAVO !" , "<CENTER>Cliquer sur OK pour continuer à être informé d'un succès<BR/><I>ou sur ANNULER pour n'avoir plus<BR/> que les avertissements en cas d'erreur.</I></CENTER>" , 170 , 420 , "verification_ok_classe"); }
          }
        }
        else { //partie est donc forcément pour l'instant UnPourToutes OU Concours
          var limite_unpourtoutes = 90;
  //2014          if (partie_actuelle=="Concours") { limite_unpourtoutes = 50; }
           document.getElementById("cible_"+nombre_cible[partie_actuelle]).innerHTML="<CENTER><span style='font-size: 20pt;text-decoration:line-through;'>"+nombre_cible[partie_actuelle]+"</span></CENTER>";
          score[partie_actuelle]+=1;
          if (score[partie_actuelle]<=(limite_unpourtoutes+(nombres_relatifs*limite_unpourtoutes))) {
            if ((score[partie_actuelle]%10) == 1) { alertbox("BRAVO !","<CENTER>Une nouvelle cible a été atteinte.<BR/>Il n'en reste plus que : "+((limite_unpourtoutes+(nombres_relatifs*limite_unpourtoutes)+1)-score[partie_actuelle])+".<BR/>Cette information n'apparait que tous les 10 trios validés.</CENTER>",170,400);}
            if (nombre_cible[partie_actuelle]==limite_unpourtoutes) { nombre_cible[partie_actuelle]=nombres_relatifs*(-90); }
            else { nombre_cible[partie_actuelle]++; }
            while (Resultat[partie_actuelle][nombre_cible[partie_actuelle]][0] == 1) {
              if (nombre_cible[partie_actuelle]==limite_unpourtoutes) { nombre_cible[partie_actuelle]=nombres_relatifs*(-90); }
              else { nombre_cible[partie_actuelle]++; }
              }
            document.getElementById("affichage_resultat").firstChild.nodeValue=nombre_cible[partie_actuelle];
          }
          else {
//il faudrait gérer ici peut-être plus proprement quand l'élève a atteint les 91 cibles
            nombre_cible[partie_actuelle]==91; // ce qui est impossible...
            document.getElementById("affichage_resultat").firstChild.nodeValue="FIN";
            if (partie_actuelle=="Concours") { alertbox("FELICITATIONS !","<CENTER>Toutes les cibles sont atteintes.<BR/>N'oubliez pas de sauver votre partie pour<BR/> valider votre participation au concours.</CENTER>",180,300);}
            else {alertbox("FELICITATIONS !","<CENTER>Toutes les cibles sont atteintes.</CENTER>",120,300);}
          }
        }}
      }
    }
    Effacer();
  }
}

// pour gerer les calques Grille et Tab
function InitCalque(Nom,Gauche,Haut,Largeur,Hauteur) {
  // pour NS4 et NS5
  if (document.layers) {
  document.write("<LAYER name='"+Nom+"' top="+Haut+" left="+Gauche+" height="+Hauteur+" width="+Largeur+"></LAYER>");
  }
  //else if 2 fois ??? à essayer
  // pour IE4
  if (document.all) {
    document.write("<DIV id='"+Nom+"' style='position:absolute;top:"+Haut+";left:"+Gauche+";height:"+Hauteur+";width:"+Largeur+";'></DIV>");
  }
  // pour NS6
  else if (document.getElementById) {
    document.write("<DIV id='"+Nom+"' style='position:absolute;top:"+Haut+";left:"+Gauche+";height:"+Hauteur+";width:"+Largeur+";'></DIV>");
  }
}

function InitCalques(Gauche,Haut,Largeur,Hauteur) {
  InitCalque("CalqueTableau",Gauche,Haut,Largeur,Hauteur);
  InitCalque("CalqueGrille",Gauche,Haut,Largeur,Hauteur);
}

function Change_Nombre_Cible(nb) {
  nombre_cible[partie_actuelle]=nb;
  document.getElementById('affichage_resultat').firstChild.nodeValue=nb;
}

function RMPC() {
  document.forms.FormPrio.radio_prio[0].checked = true;
  ChangePrio(0); // peut-être pas nécessaire
    nombres_relatifs = 0; // le menu déroulant sur le choix des nombres n'est par contre pas modifié donc il peut y avoir un bug si on revient sur une variante alors que les relatifs sont choisis dans le menu
  FormChoix.ListeVariantes.selectedIndex = 1
    partie_actuelle="UnPourToutes";
    Jeux["UnPourToutes"] = new Array;
  Jeux["UnPourToutes"][0] = 0;
    debut_plateau = 1;
  score[partie_actuelle] = 0; 
      nombre_cible[partie_actuelle]=0;
      Resultat[partie_actuelle] = new Array;
      Plateau[partie_actuelle] = new Array;
      for (var c = 0; c <= 9; c++) {
        Plateau[partie_actuelle][c] = new Array;
        for (var l = 0; l <= 9; l++) {
          Resultat[partie_actuelle][l*10+c] = new Array;
          Resultat[partie_actuelle][l*10+c][0] = 0;
          Resultat[partie_actuelle][(-1)*(l*10+c)] = new Array;
          Resultat[partie_actuelle][(-1)*(l*10+c)][0] = 0;
        }
      }
    // déclaration du plateau fixe colonne par colonne
  Plateau[partie_actuelle][0] = ["","A","B","C","D","E","F","G","H","I"];Plateau[partie_actuelle][1] = ["1",4,4,9,3,6,7,2,3,3];Plateau[partie_actuelle][2] = ["2",4,1,6,1,5,1,5,1,1];Plateau[partie_actuelle][3] = ["3",6,8,6,7,7,2,2,4,4];Plateau[partie_actuelle][4] = ["4",8,2,1,4,2,3,5,1,1];Plateau[partie_actuelle][5] = ["5",7,7,3,9,5,8,3,5,5];Plateau[partie_actuelle][6] = ["6",1,6,2,6,4,4,9,9,9];Plateau[partie_actuelle][7] = ["7",5,3,5,3,9,8,8,2,2];Plateau[partie_actuelle][8] = ["8",3,1,4,1,5,9,2,6,6];Plateau[partie_actuelle][9] = ["9",3,1,4,1,5,9,2,6,5];
    document.getElementById("td_score").style.background="url("+chemin+"fond230_noir_grand.gif)";
    affichage_score_active = false; // car le span nommé affichage_score n'existe plus pour l'instant
    var tableau_cibles="<div style='overflow:auto; width:210px; height:60;'><TABLE cellpadding=0 cellspacing=0  border=0><tbody><TR valign='middle' align='center'>";
    for (var i = 0; i <= 90; i++) {
      tableau_cibles+="<TD height=50 width=50 background='"+chemin+"fond50.gif'><DIV id='cible_"+i+"' style='width:50px;'><CENTER><span style='font-size: 20pt'><a href='javascript:Change_Nombre_Cible("+i+")'>"+i+"</a></span></CENTER><DIV></TD>";
    }
    tableau_cibles+="</TR></tbody></TABLE></div>";
    document.getElementById("td_score").innerHTML=tableau_cibles;
  contenu_div_jeux = "";
  document.getElementById('divJeux').innerHTML = "";
  Change_form_divJeux();
  Effacer(); // pour enlever les ronds et remettre grille à false partout
  Operation[0] = "0"; // pour être cohérent avec l'affichage qui va être réinitalisé à +- ci-dessous
  // ChangeTableau(); plus nécessaire car c'est inclus dans le changetaille ci-dessous mais sinon c'était pour charger le nouveau plateau et en même temps réinitialiser le bandeau de droite (les ? ont déjà été fait par Effacer() mais c'est pas dramatique de le refaire
  document.forms.FormChoix.radio_taille[1].checked = true;
  ChangeTaille(7); // là aussi le bouton bascule n'est pas mis à jour donc le menu de réglage n'est plus cohérent ... à voir...
}

function ChangeVariantes() {
  if (FormChoix.ListeVariantes.selectedIndex == 0) {
    partie_actuelle="Classique";
  }
  else { if (FormChoix.ListeVariantes.selectedIndex == 1) {
    partie_actuelle="UnPourToutes";
    document.getElementById("td_score").style.background="url("+chemin+"fond230_noir_grand.gif)";
    affichage_score_active = false; // car le span nommé affichage_score n'existe plus pour l'instant
    var tableau_cibles="<div style='overflow:auto; width:210px; height:60;'><TABLE cellpadding=0 cellspacing=0  border=0><tbody><TR valign='middle' align='center'>";
    for (var i = (nombres_relatifs*(-90)); i <= 90; i++) {
      tableau_cibles+="<TD height=50 width=50 background='"+chemin+"fond50.gif'><DIV id='cible_"+i+"' style='width:50px;'><CENTER><span style='font-size: 20pt'><a href='javascript:Change_Nombre_Cible("+i+")'>"+i+"</a></span></CENTER><DIV></TD>";
    }
    tableau_cibles+="</TR></tbody></TABLE></div>";
    document.getElementById("td_score").innerHTML=tableau_cibles;
  }
  else { if (FormChoix.ListeVariantes.selectedIndex == 2) {
    partie_actuelle="TousPourUne";
  }
  else { if (FormChoix.ListeVariantes.selectedIndex == 3) {
    partie_actuelle="Classe";
    // pour l'instant Classe se comporte au niveau de la zone score comme UnPourToutes d'où une simple recopie du script plus haut
    document.getElementById("td_score").style.background="url("+chemin+"fond230_noir_grand.gif)";
    affichage_score_active = false; // car le span nommé affichage_score n'existe plus pour l'instant
    var tableau_cibles="<div style='overflow:auto; width:210px; height:60;'><TABLE cellpadding=0 cellspacing=0  border=0><tbody><TR valign='middle' align='center'>";
    for (var i = (nombres_relatifs*(-90)); i <= 90; i++) {
      tableau_cibles+="<TD height=50 width=50 background='"+chemin+"fond50.gif'><DIV id='cible_"+i+"' style='width:50px;'><CENTER><span style='font-size: 20pt'><a href='javascript:Change_Nombre_Cible("+i+")'>"+i+"</a></span></CENTER><DIV></TD>";
    }
    tableau_cibles+="</TR></tbody></TABLE></div>";
    document.getElementById("td_score").innerHTML=tableau_cibles;
  }
  else { if (FormChoix.ListeVariantes.selectedIndex == 4) {
//2014 CONCOURS CONCOURS CONCOURS CONCOURS CONCOURS CONCOURS CONCOURS si je change de concours alors le plus simple sera peut-être d'ajouter une nouvelle partie "Concours2", de modifier ce qui se passe ici dans ce "if", de laisser "Concours" comme il est en ce moment pour pouvoir le reprendre après mais en contre partie d'ajouter dans la suite ce que doit faire le script quand c'est "Concours2"
// Attention je n'ai rien touché ici depuis l'ajout des relatifs, il faudra donc vérifier que cela n'a pas d'incidence en particulier si on coche avant ou pendant la variante concours.
// comme il s'agit pour l'instant d'une variante basée sur un pour toutes le seul problème se trouve probablement au niveau du changement de cible quand on arrive à 90 et qu'on passe à la suivante...
    nombres_relatifs = 0; // le menu déroulant sur le choix des nombres n'est par contre pas modifié donc il peut y avoir un bug si on revient sur une variante alors que les relatifs sont choisis dans le menu
// cette ligne ci-dessus devrait régler la plupart des problèmes si jamais j'oublie de corriger vraiment le problème
  alertbox("INFORMATION :","<CENTER>Vous pouvez participer au concours jusqu'à dimanche 19 mars 20h.<BR/>Il ne faut pas oublier de sauver la partie pour valider la participation.<BR/>Si vous avez déjà sauvegardé une partie 'Concours', il faut commencer<BR/>par la charger sinon la nouvelle écrasera l'ancienne.</CENTER>",180,450);
  //2015    alertbox("INFORMATION :","<CENTER>Le vrai concours ne commencera que le 14/03/2015.<BR/>En attendant, vous pouvez tester le concours avec cette grille de test.<BR/>Si vous avez déjà sauvegardé une partie 'Concours', il faut commencer<BR/>par la charger sinon la nouvelle écrasera l'ancienne.</CENTER>",200,450);
    partie_actuelle="Concours";
    debut_plateau = 1; // je ne devrais pas le passer un jour à 0 mais on ne sais jamais...
    if (score[partie_actuelle]==0) {
      nombre_cible[partie_actuelle]=0;
      Resultat[partie_actuelle] = new Array;
      Plateau[partie_actuelle] = new Array;
      for (var c = 0; c <= 9; c++) {
        Plateau[partie_actuelle][c] = new Array;
        for (var l = 0; l <= 9; l++) {
          Resultat[partie_actuelle][l*10+c] = new Array;
          Resultat[partie_actuelle][l*10+c][0] = 0;
          Resultat[partie_actuelle][(-1)*(l*10+c)] = new Array;
          Resultat[partie_actuelle][(-1)*(l*10+c)][0] = 0;
        }
      }
    }
    // déclaration du plateau fixe colonne par colonne
//2014 chercher aussi l'autre 2014
  Plateau[partie_actuelle][0] = ["","1","2","3","4","5","6","7","8","9"];Plateau[partie_actuelle][1] = ["A",7,7,6,3,7,1,8,2,8];Plateau[partie_actuelle][2] = ["B",1,4,9,9,8,1,2,2,4];Plateau[partie_actuelle][3] = ["C",9,2,6,9,4,1,6,4,6];Plateau[partie_actuelle][4] = ["D",2,5,5,9,5,7,9,3,3];Plateau[partie_actuelle][5] = ["E",4,4,9,7,9,4,3,5,5];Plateau[partie_actuelle][6] = ["F",6,2,9,5,5,7,9,7,4];Plateau[partie_actuelle][7] = ["G",6,6,5,7,6,1,5,5,3];Plateau[partie_actuelle][8] = ["H",5,7,7,8,9,9,6,5,6];Plateau[partie_actuelle][9] = ["I",9,2,5,1,3,2,8,4,7];
    //Plateau[partie_actuelle][0] = ["","","","T","E","S","T","","",""];
    //Plateau[partie_actuelle][1] = ["M",1,2,3,4,5,6,7,8,9];
    //Plateau[partie_actuelle][2] = ["A",1,2,3,4,5,6,7,8,9];
    //Plateau[partie_actuelle][3] = ["R",1,2,3,4,5,6,7,8,9];
    //Plateau[partie_actuelle][4] = ["S",1,2,3,4,5,6,7,8,9];
    //Plateau[partie_actuelle][5] = ["-",1,2,3,4,5,6,7,8,9];
    //Plateau[partie_actuelle][6] = ["2",1,2,3,4,5,6,7,8,9];
    //Plateau[partie_actuelle][7] = ["0",1,2,3,4,5,6,7,8,9];
    //Plateau[partie_actuelle][8] = ["1",1,2,3,4,5,6,7,8,9];
    //Plateau[partie_actuelle][9] = ["5",1,2,3,4,5,6,7,8,9];
    // ci-dessous le script concernant un concours basé sur UnPourToutes (recopie d'un bout de script située plus haut avec seul changement 90 <--> 50 (changement annulé après concertation avecles collègues) et d'un autre située plus bas)
    document.getElementById("td_score").style.background="url("+chemin+"fond230_noir_grand.gif)";
    affichage_score_active = false; // car le span nommé affichage_score n'existe plus pour l'instant
    var tableau_cibles="<div style='overflow:auto; width:210px; height:60;'><TABLE cellpadding=0 cellspacing=0  border=0><tbody><TR valign='middle' align='center'>";
    for (var i = 0; i <= 90; i++) {
      tableau_cibles+="<TD height=50 width=50 background='"+chemin+"fond50.gif'><DIV id='cible_"+i+"' style='width:50px;'><CENTER><span style='font-size: 20pt'><a href='javascript:Change_Nombre_Cible("+i+")'>"+i+"</a></span></CENTER><DIV></TD>";
    }
    tableau_cibles+="</TR></tbody></TABLE></div>";
    document.getElementById("td_score").innerHTML=tableau_cibles;
    if (score[partie_actuelle]!=0) {
      for (var i = 0; i <= 90; i++) {
        if (Resultat[partie_actuelle][i][0] == 1) { document.getElementById("cible_"+i).innerHTML="<CENTER><span style='font-size: 20pt;text-decoration:line-through;'>"+i+"</span></CENTER>"; }
      }
    }
// CONCOURS CONCOURS CONCOURS CONCOURS CONCOURS CONCOURS CONCOURS en cas de changement de genre de concours il y a d'autre lignes à adapter ou à ajouter si l'on créé un Concours2
  }}}}}
  if ((partie_actuelle=="Classique") || (partie_actuelle=="TousPourUne")) {
    document.getElementById("td_score").style.background="url("+chemin+"fond230_noir.gif)";
    document.getElementById("td_score").innerHTML="<span id='affichage_score' style='font-size: 24pt'>"+score[partie_actuelle]+"</span>";
  }
  if ((score[partie_actuelle]==0)&&(FormChoix.ListeVariantes.selectedIndex != 4)) { // l'initialisation des variantes concours (quelques soit le score) est faite plus haut de manière à regrouper un maximum les scripts à modifier en cas d'évolution du concours
    Resultat[partie_actuelle] = new Array;
    Plateau[partie_actuelle] = new Array;
    for (var c = 0; c <= 9; c++) {
      Plateau[partie_actuelle][c] = new Array;
      for (var l = 0; l <= 9; l++) {
        Plateau[partie_actuelle][c][l]=Math.pow(-1,nombres_relatifs*Math.floor((2)*Math.random()+1))*(parseFloat(document.FormConfig.borne_inf.value)+Math.floor(((parseFloat(document.FormConfig.borne_sup.value)-parseFloat(document.FormConfig.borne_inf.value))+1)*Math.random()));
        Resultat[partie_actuelle][l*10+c] = new Array;
        Resultat[partie_actuelle][l*10+c][0] = 0;
        Resultat[partie_actuelle][(-1)*(l*10+c)] = new Array;
        Resultat[partie_actuelle][(-1)*(l*10+c)][0] = 0;
      }
    }
  if (repartition_originale_bool == true) { Repartition(Plateau[partie_actuelle]); }
    if (partie_actuelle == "UnPourToutes") { nombre_cible[partie_actuelle]=0; }
    else {
    if (cibles_possibles_uniquement) { ChercherCiblesPossibles(); }
    nombre_cible[partie_actuelle]=NouvelleCible();
  }

    if (debut_plateau == 1) { EnleverLigne0Colonne0(Plateau[partie_actuelle],Grille); }
  }
  else { if (partie_actuelle == "UnPourToutes") {
    for (var i = (nombres_relatifs*(-90)); i <= 90; i++) {
      if (Resultat[partie_actuelle][i][0] == 1) { document.getElementById("cible_"+i).innerHTML="<CENTER><span style='font-size: 20pt;text-decoration:line-through;'>"+i+"</span></CENTER>"; }
    }
  }}
  if (affichage_score_active) { document.getElementById("affichage_score").firstChild.nodeValue=score[partie_actuelle];}
  // 3 lignes suivantes : je préfère effacer tous les jeux de la variante précédente et reconstruire son contenu que de garder en mémoire un exemplaire de tous les contenus des différentes variantes en cours
  contenu_div_jeux = "";
  document.getElementById('divJeux').innerHTML = "";
  var avertissement_affichage=true;
  if ((Jeux[partie_actuelle][0] > 50)  && (form_divJeux.affichage.checked)) { if (confirm("Avertissement : cette variante comporte déjà plus de 50 trios validés\nlors d'une précédente partie, leur affichage peut entraîner\nun ralentissement de votre navigateur.\nCliquez sur OK si vous voulez vraiment les afficher\n ou Annuler pour n\'afficher que les prochains.")) { avertissement_affichage=true; } else { avertissement_affichage=false;} }
  else { avertissement_affichage = true; }
  if ((form_divJeux.affichage.checked) && (avertissement_affichage == true)) { for (var i = 1; i <= Jeux[partie_actuelle][0]; i++) {
    var resultat_jeu_i = Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre1"]][Jeux[partie_actuelle][i]["y_nombre1"]]*Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre2"]][Jeux[partie_actuelle][i]["y_nombre2"]];
    if (Jeux[partie_actuelle][i][0]=="+") { resultat_jeu_i += Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre3"]][Jeux[partie_actuelle][i]["y_nombre3"]]; }
    else { resultat_jeu_i -= Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre3"]][Jeux[partie_actuelle][i]["y_nombre3"]]; }
    AjouterDivJeux(i,resultat_jeu_i); }
    document.getElementById('divJeux').innerHTML = "<table border='0'><tbody><tr valign='middle'>"+contenu_div_jeux+"</TR></tbody></table>";
  }
  else {
    // j'ai tous déplacé au dessus de la boucle car sinon il y'avait un problème quand la case était cochée mais que la partie était vide, là au moins je suis certain que le div est vidé et "refermé"
  }
  if (((cibles_possibles_uniquement) && (partie_actuelle != "UnPourToutes")) && ((partie_actuelle != "Concours") && (score[partie_actuelle]!=0))) { ChercherCiblesPossibles(); }
  Change_form_divJeux();
  Effacer(); // pour enlever les ronds et remettre grille à false partout
  Operation[0] = "0"; // pour être cohérent avec l'affichage qui va être réinitalisé à +- ci-dessous
  ChangeTableau(); // pour charger le nouveau plateau et en même temps réinitialiser le bandeau de droite (les ? ont déjà été fait par Effacer() mais c'est pas dramatique de le refaire
}

function RecommencerLesParties(relatifs_ou_pas) {
  score["Classique"]=0;
  score["UnPourToutes"]=0;
  score["TousPourUne"]=0;
  score["Classe"]=0;
  Jeux["Classique"] = new Array;
  Jeux["Classique"][0] = 0;
  Jeux["UnPourToutes"] = new Array;
  Jeux["UnPourToutes"][0] = 0;
  Jeux["TousPourUne"] = new Array;
  Jeux["TousPourUne"][0] = 0;
  Jeux["Classe"] = new Array;
  Jeux["Classe"][0] = 0;
  if (relatifs_ou_pas == 2) {
  nombres_relatifs = 0;
  document.FormChoix.radio_taille[1].checked = true;
  ChangeTaille(7);
  repartition_originale_bool = true;
  ChangeVariantes();
  alert_repartition();
  }
  else {
  repartition_originale_bool = false;
  if (relatifs_ou_pas == 0) { nombres_relatifs = 0; }
  if (relatifs_ou_pas == 1) { nombres_relatifs = 1; } // pas de "else" car je me laisse la possibilité d'utiliser cette fonction sans toucher à la variable nombres_relatifs
  ChangeVariantes();
  }
}

function Sauver() {
  if ((document.FormChoix.Identifiant.value == "") || (document.FormChoix.Motdepasse.value == "")) {
    alertbox("AVERTISSEMENT :","<CENTER>Il faut indiquer un identifiant et un mot de passe !</CENTER>",120,350);
  }
  else {
  if (score[partie_actuelle]==0) {
         alertbox("SAUVEGARDE IMPOSSIBLE :","<CENTER>Pour sauvegarder, il faut avoir validé au moins un trio.<BR/> Si c'est une ancienne partie que vous voulez recharger alors<BR/>il faut utiliser le bouton CHARGER à la place du bouton SAUVER.</CENTER>",160,450);
  }
  else {
    TRIOjson.JeuxJson = new Array();
    for (var c = 0; c <= 9; c++) {
    TRIOjson.PlateauJson[c] = new Array();
    for (var l = 0; l <= 9; l++) {
      TRIOjson.PlateauJson[c][l]=Plateau[partie_actuelle][c][l];
    }
    }
    if (partie_actuelle == "Concours") { TRIOjson.PlateauJson[0][0]= concours_actuel ; } // pour "Concours" pour json c'est la même variante qui servira pour tous les "Concours" je place donc un code dans Plateau[0][0] pour éviter de charger un concours qui n'existe plus
    TRIOjson.JeuxJson[0] = Jeux[partie_actuelle][0];
    for (var i = 1; i <= Jeux[partie_actuelle][0]; i++) {
    TRIOjson.JeuxJson[i] = new Array();
    TRIOjson.JeuxJson[i] = Jeux[partie_actuelle][i][0]+Jeux[partie_actuelle][i]["x_nombre1"]+Jeux[partie_actuelle][i]["y_nombre1"]+Jeux[partie_actuelle][i]["x_nombre2"]+Jeux[partie_actuelle][i]["y_nombre2"]+Jeux[partie_actuelle][i]["x_nombre3"]+Jeux[partie_actuelle][i]["y_nombre3"];
    if (!((Jeux[partie_actuelle][i]["fois"]==0) && ((Jeux[partie_actuelle][i]=="+") || (Jeux[partie_actuelle][i]=="-")))) { 
    TRIOjson.JeuxJson[i] += SigneOperationFois[Jeux[partie_actuelle][i]["fois"]]
    }
    }
    TRIOjson.ScoreJson = score[partie_actuelle];
    TRIOjson.CibleJson = nombre_cible[partie_actuelle];
    ajaxJSONPost(TRIOjson);
  }
  }
}

function Charger() {
	if ((document.FormChoix.Identifiant.value == "") || (document.FormChoix.Motdepasse.value == "")) {
		alertbox("AVERTISSEMENT :","<CENTER>Il faut indiquer un identifiant et un mot de passe !</CENTER>",120,350);
	}
	else {
		jQuery.post(
							'charge.php',
							{
								login: document.FormChoix.Identifiant.value,
								pass: md5(document.FormChoix.Motdepasse.value),
								variante: partie_actuelle,
								etab:document.FormChoix.ListeEtab.value
							},
							function( data ) {
								if ((data==0) || (data==20)) {
									if (data==0) {
										if (document.FormChoix.ListeEtab.value == "college") {
											alertbox("AVERTISSEMENT :","<CENTER>Les identifiants ne sont pas reconnus comme appartenant au collège<BR/>et aucune sauvegarde "+partie_actuelle+" n'existe dans l'espace visiteur.</CENTER>",140,420);
										}
										else {
											alertbox("AVERTISSEMENT :","<CENTER>Aucune sauvegarde "+partie_actuelle+" n'existe dans l'espace sélectionné.<BR/> Vérifiez vos identifiants ou sélectionnez un autre établissement.</CENTER>",140,420);
										}
									}
									else { 
										alertbox("AVERTISSEMENT :","<CENTER>Les identifiants appartiennent bien au collège<BR/>mais aucune sauvegarde n'existe pour cette variante ("+partie_actuelle+").</CENTER>",140,420); }
								}
								else {
									TRIOjson=data;
									if ((TRIOjson.PlateauJson[0][0] != "") && (TRIOjson.PlateauJson[0][0] != concours_actuel)) { // avantage de ce test, il est valable pour Concours et aussi pur un futur Concours2..
										alertbox("AVERTISSEMENT :","<CENTER>Une sauvegarde existe bien mais comme elle ne concerne pas<BR/>le concours actuel, elle ne peut plus être chargée.</CENTER>",140,400);
									}
									else {
										/// pour Passer une info à un élève (à l'origine c'était en 2016 pour Allyssia A qui avait écrasé sa sauvegarde du concours)
										if (document.FormChoix.Identifiant.value == "jpavageau") {
											alertbox("ADRIEN :","<CENTER>Tu peux informer Allyssia que sa sauvergarde a été récupérée.<BR/>M. PAVAGEAU (faire un commentaire en cas de besoin).</CENTER>",140,420);
										}
										/// pour Passer...
										if (TRIOjson.PlateauJson[0][0] != "") { TRIOjson.PlateauJson[0][0] = ""; }
										nombres_relatifs = 0; // c'est le moyen le plus simple (voir aussi 3 lignes plus loin) que j'ai trouvé pour repérer les sauvegardes faites avec des relatifs et relativement propre (pas complètement car le menu déroulant concernant les nombres n'est pas géré et cela peut aussi avoir des conséquences sur les autres parties mais ce ne serait pas de chance...)
										for (var c = 0; c <= 9; c++) {
											for (var l = 0; l <= 9; l++) {
												if (Plateau[partie_actuelle][c][l] < 0) {nombres_relatifs = 1;}
												Plateau[partie_actuelle][c][l]=TRIOjson.PlateauJson[c][l];
											}
										}
										if (Plateau[partie_actuelle][0][0] == "") { debut_plateau = 1;} else { debut_plateau = 0;}
										Jeux[partie_actuelle][0] = TRIOjson.JeuxJson[0];
										var avertissement_affichage = true;
										//2015 enlevé pour Alice car c'est une alertbox classique qui peut être bloqué par les navigateur ???        if ((Jeux[partie_actuelle][0] > 50)  && (form_divJeux.affichage.checked)) { if (confirm("Avertissement : l\'affichage des trios est activé et votre\nsauvegarde contenant plus de 50 jeux cela pourrait\nentraîner un ralentissement de votre navigateur.\nCliquez sur OK si vous voulez vraiment afficher tous\nles trios validés, sinon cliquez sur Annuler.")) { avertissement_affichage=true; } else { avertissement_affichage=false; } }
										for (var i = -90; i <= 90; i++) {Resultat[partie_actuelle][i][0] = 0;}
										contenu_div_jeux = "";
										for (var i = 1; i <= Jeux[partie_actuelle][0]; i++) {
											Jeux[partie_actuelle][i] = new Array();
											Jeux[partie_actuelle][i][0] = TRIOjson.JeuxJson[i].charAt(0);
											Jeux[partie_actuelle][i]["x_nombre1"] = parseInt(TRIOjson.JeuxJson[i].charAt(1));
											Jeux[partie_actuelle][i]["y_nombre1"] = parseInt(TRIOjson.JeuxJson[i].charAt(2));
											Jeux[partie_actuelle][i]["x_nombre2"] = parseInt(TRIOjson.JeuxJson[i].charAt(3));
											Jeux[partie_actuelle][i]["y_nombre2"] = parseInt(TRIOjson.JeuxJson[i].charAt(4));
											Jeux[partie_actuelle][i]["x_nombre3"] = parseInt(TRIOjson.JeuxJson[i].charAt(5));
											Jeux[partie_actuelle][i]["y_nombre3"] = parseInt(TRIOjson.JeuxJson[i].charAt(6));
											if (TRIOjson.JeuxJson[i].length==8) {
												Jeux[partie_actuelle][i]["fois"]=NumOperationFois[TRIOjson.JeuxJson[i].charAt(7)];
												document.FormPrio.radio_prio[1].checked = true ; }
											else {
												Jeux[partie_actuelle][i]["fois"]=0;
											}
											var resultat_jeu_i = ((Jeux[partie_actuelle][i]["fois"]-1)*(Jeux[partie_actuelle][i]["fois"]-2)*(Jeux[partie_actuelle][i]["fois"]-3)/(-6))*Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre1"]][Jeux[partie_actuelle][i]["y_nombre1"]]*Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre2"]][Jeux[partie_actuelle][i]["y_nombre2"]]+(Jeux[partie_actuelle][i]["fois"]*(Jeux[partie_actuelle][i]["fois"]-2)*(Jeux[partie_actuelle][i]["fois"]-3)/2)*(Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre1"]][Jeux[partie_actuelle][i]["y_nombre1"]]+Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre2"]][Jeux[partie_actuelle][i]["y_nombre2"]])+(Jeux[partie_actuelle][i]["fois"]*(Jeux[partie_actuelle][i]["fois"]-1)*(Jeux[partie_actuelle][i]["fois"]-3)/(-2))*(Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre1"]][Jeux[partie_actuelle][i]["y_nombre1"]]-Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre2"]][Jeux[partie_actuelle][i]["y_nombre2"]])+(Jeux[partie_actuelle][i]["fois"]*(Jeux[partie_actuelle][i]["fois"]-1)*(Jeux[partie_actuelle][i]["fois"]-2)/6)*(Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre1"]][Jeux[partie_actuelle][i]["y_nombre1"]]/Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre2"]][Jeux[partie_actuelle][i]["y_nombre2"]]);
											if (Jeux[partie_actuelle][i][0]=="+") { resultat_jeu_i += Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre3"]][Jeux[partie_actuelle][i]["y_nombre3"]]; }
											else if (Jeux[partie_actuelle][i][0]=="-") { resultat_jeu_i -= Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre3"]][Jeux[partie_actuelle][i]["y_nombre3"]]; }
											else if (Jeux[partie_actuelle][i][0]=="x") { resultat_jeu_i *= Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre3"]][Jeux[partie_actuelle][i]["y_nombre3"]]; }
											else if (Jeux[partie_actuelle][i][0]==":") { resultat_jeu_i /= Plateau[partie_actuelle][Jeux[partie_actuelle][i]["x_nombre3"]][Jeux[partie_actuelle][i]["y_nombre3"]]; }
											if ((avertissement_affichage==true) && (form_divJeux.affichage.checked)) { AjouterDivJeux(i,resultat_jeu_i); }
											if (Math.abs(resultat_jeu_i)<91) {
												Resultat[partie_actuelle][resultat_jeu_i][0]++;
												Resultat[partie_actuelle][resultat_jeu_i][Resultat[partie_actuelle][resultat_jeu_i][0]] = i;
											}
										}
										if ((avertissement_affichage==true) && (form_divJeux.affichage.checked)) {
											document.getElementById('divJeux').innerHTML = "<table border='0'><tbody><tr valign='middle'>"+contenu_div_jeux+"</TR></tbody></table>";
										}
										Change_form_divJeux();
										score[partie_actuelle] = TRIOjson.ScoreJson;
										nombre_cible[partie_actuelle] = TRIOjson.CibleJson;
										if ((partie_actuelle=="UnPourToutes") || (partie_actuelle=="Concours")) {
											for (var i = (nombres_relatifs*(-90)); i <= 90; i++) {
												if (Resultat[partie_actuelle][i][0] > 0) { document.getElementById("cible_"+i).innerHTML="<CENTER><span style='font-size: 20pt;text-decoration:line-through;'>"+i+"</span></CENTER>"; }
												else {  document.getElementById("cible_"+i).innerHTML="<CENTER><span style='font-size: 20pt'><a href='javascript:Change_Nombre_Cible("+i+")'>"+i+"</a></span></CENTER>"; }
											}
										}
										else {
											if (partie_actuelle!="Classe") { document.getElementById("affichage_score").firstChild.nodeValue=score[partie_actuelle];}
										}
										Effacer();
										Operation[0] = "0"; // pour être cohérent avec l'affichage qui va être réinitalisée à +- ci-dessous
										if (((cibles_possibles_uniquement) && (partie_actuelle != "UnPourToutes")) && (partie_actuelle != "Concours")) { ChercherCiblesPossibles(); }
										ChangeTableau();
									}
								}
							},
							'json' // Format des donnÃ©es reÃ§ues.
			).fail(function() { alert('ATTENTION : charge.php ne se termine pas correctement.'); });
	}
}
  
function ChangerResultat() {
  if  ((partie_actuelle=="Classique") || (partie_actuelle=="Classe"))  {
    if  ((partie_actuelle=="Classique") && (score[partie_actuelle]>0)) {       
      alertbox('INFORMATION :','<CENTER>PENALITE = 1 point a été retiré au score.</CENTER>',120,300);
      score[partie_actuelle]--;
      document.getElementById("affichage_score").firstChild.nodeValue=score[partie_actuelle];
    }
    nombre_cible[partie_actuelle]=NouvelleCible();
    document.getElementById("affichage_resultat").firstChild.nodeValue=nombre_cible[partie_actuelle];
    Effacer();
  }
  else { if (partie_actuelle=="TousPourUne") {
    if (score[partie_actuelle] == 0) {
    nombre_cible[partie_actuelle]=NouvelleCible();
    document.getElementById("affichage_resultat").firstChild.nodeValue=nombre_cible[partie_actuelle];
    Effacer();
    }
    else {
      alertbox("INFORMATION :","<CENTER>Comme la partie est commencée, le nombre cible ne peut plus être changé.<BR/>Vous pouvez cependant forcer ce changement en rechargeant complètement<BR/>la page et en choisissant à nouveau la variante.</CENTER>",160,480);
    }
  }
  else { // Nous sommes alors forcément soit sur UnPourToutes soit sur Concours
  var limite_unpourtoutes = 90;
//2014  if (partie_actuelle=="Concours") { limite_unpourtoutes = 50; }
  if (score[partie_actuelle]<=(limite_unpourtoutes+(nombres_relatifs*limite_unpourtoutes))) { // Si la partie est terminée la boucle risque de tourner indéfiniment...
    if (nombre_cible[partie_actuelle]==limite_unpourtoutes) { nombre_cible[partie_actuelle]=(nombres_relatifs*(-90)); }
    else { nombre_cible[partie_actuelle]++; }
    while (Resultat[partie_actuelle][nombre_cible[partie_actuelle]][0] == 1) {
      if (nombre_cible[partie_actuelle]==limite_unpourtoutes) { nombre_cible[partie_actuelle]=(nombres_relatifs*(-90)); }
      else { nombre_cible[partie_actuelle]++; }
    }
    document.getElementById("affichage_resultat").firstChild.nodeValue=nombre_cible[partie_actuelle];
    if (eviter_alert["changer_cible_unpourtoutes"] == false) { eviter_alert["changer_cible_unpourtoutes"] = true; alertbox("INFORMATION :","<CENTER>Modification effectuée.<BR/>Il est aussi possible de sélectionner directement<BR/>le nombre cible dans la zone située sous SCORE.</CENTER>",170,320); }
  }}}
}

function ChangeTableau() {
  var contenu="<center><table cellpadding=0 cellspacing=0 border=0><tbody><TR valign='middle' align='center'><td width=272><div style='width:272px;height:550px;'></div></td><td width=510 align='center'><BR/><TABLE cellpadding=0 cellspacing=0 border=0>";
  for (var l = 0; l <= fin_plateau; l++) {
    contenu+="<TR valign='middle' align='center'>";
    for (var c = 0; c <= fin_plateau; c++) {
    if (((l == 0)||(c == 0))&&(debut_plateau ==1)) {
      contenu+="<TD height="+t_case+" width="+t_case+" background='"+chemin+"vide.gif'><CENTER><B><span style='font-size: 20pt'>"+Plateau[partie_actuelle][c][l]+"</span></B></CENTER></TD>";
    }
    else {
      contenu+="<TD height="+t_case+" width="+t_case+" background='"+chemin;
    if (fin_plateau == 9) {
    contenu+="fond50.png'><CENTER><span style='font-size: 20pt'>"+Plateau[partie_actuelle][c][l]+"</span></CENTER></TD>";
    }
    else {
    contenu+=Math.floor((5)*Math.random()+1)+".gif'><CENTER><span style='font-size: 22pt'>"+Plateau[partie_actuelle][c][l]+"</span></CENTER></TD>";
    }
    }
    }
    contenu+="</TR>";
  }
  contenu+="</TABLE><div style='width:510px;'></div><BR/><BR/></td><td width=120 align='center'><div style='width:120px;'></div><FORM name='FormCalcul'><INPUT type='button' value='EFFACER' onclick='Effacer();'><TABLE cellpadding=0 cellspacing=0 border=0><tbody><TR><TD height=10></TD></TR><TR valign='middle' align='center'><TD height=80 width=80 background='"+chemin+"fond80.gif'><span id='nombre1' style='font-size: 24pt'>?</span></TD></tr><TR valign='middle' align='center'><TD><img src='"+chemin+"0.png' border=0 width=80 height=42 onClick='foisClick(this);' name='image_fois'></TD></tr><TR valign='middle' align='center'><TD height=80 width=80 background='"+chemin+"fond80.gif'><span id='nombre2' style='font-size: 24pt'>?</span></TD></tr><TR valign='middle' align='center'><TD><img src='"+chemin+"plusmoins.gif' border=0 width=80 height=50 onClick='plusmoinsClick(this);' name='image_plusmoins'></TD></tr><TR valign='middle' align='center'><TD height=80 width=80 background='"+chemin+"fond80_vert.gif'><span id='nombre3' style='font-size: 24pt'>?</span></TD></tr><TR><TD height=10></TD></TR></tbody></table><INPUT type='button' value='VERIFIER' onclick='Verifier()'></FORM><TABLE cellpadding=0 cellspacing=0 border=0><tbody><TR><TD height=10></TD></TR><TR valign='middle' align='center'><TD height=80 width=80 background='"+chemin+"fond80_rouge.gif'><span id='affichage_resultat' style='font-size: 24pt'>"+nombre_cible[partie_actuelle]+"</span></TD></tr></tbody></table></TD></tr></tbody></table></center>";
  // pour NS4 et NS5
  if (document.layers) {
    document.layers["CalqueTableau"].document.write(contenu);
    document.layers["CalqueTableau"].document.close();
  }
  // pour IE4
  if (document.all) {
    document.all["CalqueTableau"].innerHTML=contenu;
  }
  // pour NS6
  else if (document.getElementById) {
    document.getElementById("CalqueTableau").innerHTML=contenu;
  }
}

function ChangeTaille(nouvelle_taille) {
  if (nouvelle_taille == 7) {
    t_case = 60;
  }
  else {
    t_case = 50;
  }
  fin_plateau = nouvelle_taille;
  ChangeGrille();
  ChangeTableau();
    Effacer();
    if (((cibles_possibles_uniquement) && (partie_actuelle != "UnPourToutes")) && (partie_actuelle != "Concours")) { ChercherCiblesPossibles(); }
}

function ChangeGrille() {
  var contenu2="<BR/>";
  for (var l = 0; l <= fin_plateau; l++) {
    for (var c = 0; c <= fin_plateau; c++) {
    contenu2+="<img src='"+chemin+"vide.gif' border=0 height="+t_case+" width="+t_case+" onMouseOut='mOut(this,"+c+","+l+");' onMouseOver='mOver(this,"+c+","+l+");' onClick='mClick(this,"+c+","+l+");' name='vide"+c+l+"'>";
    }
    contenu2+="<BR/>";
  }
  contenu2+="<div style='width:510px;'></div><BR/><BR/>";
  document.getElementById("td_grille").innerHTML=contenu2;
}

function alert_reseau_college() {
  alertbox("INFORMATION :","<CENTER>Les identifiants réseau sont ceux utilisés<BR/> pour Scribe/Connexion++/Eole/LaboMeP.<BR/>C'est à dire : ppp.nnn ou ppp.nnnn<BR/>+ mot de passe distribué en début d'année.</CENTER>",190,320);
}

function alert_repartition() {
  alertbox("INFORMATION :","<CENTER>Dans le jeu d'origine, il y'a 49 cartons répartis de la manière suivante :<BR/>5 x 1 ; 6 x 2 ; 6 x 3 ; 6 x 4 ; 6 x 5 ; 6 x 6 ; 5 x 7 ; 5 x 8 et 4 x 9.</CENTER>",150,450);
}

function ChargeGrille() {
// POUR CONCOURS <OPTION VALUE='concours'>Concours</option>
  var contenu="<table cellpadding=0 cellspacing=0 border=0><tbody><TR valign='middle' align='center'><td width=272><div style='overflow:auto;width:272px;height:550px;'><CENTER><FORM name='FormChoix'><TABLE cellpadding=0 cellspacing=0 border=0><tbody><TR valign='middle' align='center'><TD height=25 width=270 colspan='2'>Choisir la variante : <SELECT NAME='ListeVariantes' SIZE='1' onChange='ChangeVariantes();'><OPTION SELECTED VALUE='classique'>Classique</option><OPTION VALUE='unpourtoutes'>Un pour toutes</option><OPTION VALUE='touspourune'>Tous pour une</option><OPTION VALUE='classe'>Pour la classe</option></SELECT></TD></TR><TR valign='middle'><TD height=25 width=70>Plateau : </TD><TD height=25 width=190 align='center'><INPUT type='radio' name='radio_taille' value='9x9' onclick='ChangeTaille(9);' checked/>9 x 9 <INPUT type='radio' name='radio_taille' value='7x7' onclick='ChangeTaille(7);'/>7 x 7 coloré</TD></TR><TR valign='middle'><TD height=25 width=70>Nombres : </TD><TD height=25 width=190 align='center'><SELECT NAME='ListeNombres' SIZE=1 onChange='RecommencerLesParties(FormChoix.ListeNombres.selectedIndex);'><OPTION SELECTED VALUE='positifs'>entiers positifs</option><OPTION VALUE='relatifs'>entiers relatifs</option><OPTION VALUE='origine'>du jeu d'origine</option></SELECT></TD></TR><TR valign='middle'><TD height=25 width=60>Cibles : </TD><TD height=30 width=200 align='center'><INPUT type='radio' name='radio_limite_cible' value='50' onclick='limite_default = true;' checked />jusqu'à 50<INPUT type='radio' name='radio_limite_cible' value='90' onclick='limite_default = false;'/>jusqu'à <INPUT type='text' name='limite_cible_form' size=2 value='90'/></TD></TR><TR valign='middle' align='center'><TD height=40 colspan='2'><span style='font-size: 20pt'>SCORE</span></TD></TR><TR valign='middle' align='center'><TD height=80 width=270 colspan='2'><TABLE cellpadding=0 cellspacing=0 border=0><tbody><TR><TD height=80 width=15></TD><TD id='td_score' height=80 width=230 align='center' background='"+chemin+"fond230_noir.gif'><span id='affichage_score' style='font-size: 24pt'>"+score[partie_actuelle]+"</span></TD><TD height=80 width=15></TD></TR></tbody></table></TD></TR><TR valign='middle' align='center'><TD height=30 width=270 colspan='2'><INPUT type='button' value='CHANGER DE CIBLE' onclick='ChangerResultat();'/></TD></TR><TR valign='middle'><TD width=270 colspan='2'><FIELDSET class='fieldsetm'><LEGEND>Arrêter ou reprendre une partie :</LEGEND><CENTER><TABLE cellpadding=0 cellspacing=0 border=0><tbody><TR valign='middle'><TD height=30><SELECT NAME='ListeEtab' SIZE=1><OPTION SELECTED VALUE='college'>Collège A. Camus (Frontenay R-R)</option><OPTION VALUE='sonpadici'>Visiteurs</option><OPTION VALUE='beauvoir'>Ecole C. Perrault (Beauvoir/Niort)</option><OPTION VALUE='prisse'>Ecole C. Rossignol (Prissé la C.)</option><OPTION VALUE='rochenard'>Ecole des acacias (La Rochénard)</option><OPTION VALUE='saintsym'>Ecole du Bief (St Symphorien)</option><OPTION VALUE='epannes'>Ecole J. Prévert (Epannes)</option><OPTION VALUE='frontenay'>Ecole La Fontaine (Frontenay R-R)</option></SELECT></TD></TR></tbody></table></CENTER><CENTER><TABLE cellpadding=0 cellspacing=0 border=0><tbody><TR valign='middle'><TD height=30 width=100>Identifiant : </TD><TD height=30 width=90><INPUT type='text' name='Identifiant' size=10 value=''/></TD></TR><TR valign='middle'><TD height=30 width=100>Mot de passe : </TD><TD height=30 width=90><INPUT type='password' name='Motdepasse' size=10 value=''/></TD></TR></tbody></table><I>Les visiteurs choisissent leurs propres identifiants et les élèves du collège doivent utiliser ceux du <a href='javascript:alert_reseau_college();'>réseau</a>. Une seule sauvegarde par variante n'est possible, la dernière écrasera donc la précédente.</i><br/><INPUT type='button' value='SAUVER' onclick='Sauver();'/> <INPUT type='button' value='CHARGER' onclick='Charger();'/></CENTER></FIELDSET></TD></TR></tbody></table></FORM></CENTER></div></td><td width=510 id='td_grille' align='center'><BR/>";
  for (var l = 0; l <= fin_plateau; l++) {
    contenu+="";
    for (var c = 0; c <= fin_plateau; c++) {
    contenu+="<img src='"+chemin+"vide.gif' border=0 height="+t_case+" width="+t_case+" onMouseOut='mOut(this,"+c+","+l+");' onMouseOver='mOver(this,"+c+","+l+");' onClick='mClick(this,"+c+","+l+");' name='vide"+c+l+"'>";
    }
    contenu+="<BR/>";
  }
  contenu+="<div style='width:510px;'></div><BR/><BR/></td></tr></tbody></table><BR>";
  // pour NS4 et NS5
  if (document.layers) {
    document.layers["CalqueGrille"].document.write(contenu);
    document.layers["CalqueGrille"].document.close();
  }
  // pour IE4
  if (document.all) {
    document.all["CalqueGrille"].innerHTML=contenu;
  }
  // pour NS6
  else if (document.getElementById) {
    document.getElementById("CalqueGrille").innerHTML=contenu;
  }
}

function mOver(image,i,j) {
  if (Grille[i][j]) {}
  else {image.src=chemin+"cadrea.gif";}
}

function mOut(image,i,j) {
  if (Grille[i][j]) { }
  else { image.src=chemin+"vide.gif"; }
}

function Grille2(x,y) { // pour gérer éventuellement le changement d'image (fonctionnalité ajoutée en 07/2014)
  Grille[x][y]=true;
  if (cacher_case_active) { window.document.images["vide"+x+y].src=chemin+"cache.gif"; }
}

function GrilleOK(x,y) {
  Grille[x][y]=false;
  if (cacher_case_active) { window.document.images["vide"+x+y].src=chemin+"vide.gif"; }
}

function CauchageAuto(x,y) { // utilisée également pour avoir une grille propre quand on a coché le 3ème nombre et qu'il reste une possibilité d'où code 0,0
  if (etape == 2) {
  if ((cochage_auto)&&!(document.FormPrio.radio_prio[1].checked)) {
    Grille[x][y] == true ; // pas nécessaire en réalité car déjà fait dans la boucle "du carré"
    window.document.images["vide"+x+y].src=chemin+"rondv"+t_case+".gif";
    image_cliquee_3 = window.document.images["vide"+x+y]; // pour Effacer();
    Operation["x_nombre3"]=x;
    Operation["y_nombre3"]=y;
    document.getElementById("nombre3").firstChild.nodeValue=Plateau[partie_actuelle][x][y];
    nombre3_coche_auto = true;
  }
  else {
    GrilleOK(x,y);
  }
  }
  if ((etape == 3) || ((cochage_auto)&&!(document.FormPrio.radio_prio[1].checked))) {   // faire le tour du tableau et griser la dernière case en FALSE qui reste
  for (var c = debut_plateau; c <= fin_plateau; c++) {
    for (var l = debut_plateau; l <= fin_plateau; l++) {
    if (Grille[c][l] == false) { Grille[c][l] = true ; if (cacher_case_active) { window.document.images["vide"+c+l].src=chemin+"cache.gif"; } }
  }}
  }
}

function mClick(image,i,j) {
  if ((Grille[i][j])||(etape==3)) {
  if ((etape==3)&&(!((Operation["x_nombre"+etape]==i)&&(Operation["y_nombre"+etape]==j)))) {
    if (nombre3_coche_auto) {
      if (effacage_auto) { Effacer(); } else { alertbox('AVERTISSEMENT :','<CENTER>Il ne faut que trois nombres !<BR/><i>Le 3ème a été coché automatiquement.</i></CENTER>',150,300); }
    }
    else {
      if (effacage_auto) { Effacer(); }
      else {
        // avant  alertbox('AVERTISSEMENT :','<CENTER>Il ne faut que trois nombres !</CENTER>',120,300);
        if (eviter_alert["erreur"] == false) {
          confirmbox( "AVERTISSEMENT :" , "<CENTER>Il ne faut que trois nombres !</CENTER><BR/><CENTER>Cliquer sur OK pour continuer à être informé en cas d'erreur<BR/><I>ou sur ANNULER pour effacer automatiquement à la prochaine erreur.</I></CENTER>" , 200 , 450 , "erreur");
        }
      }
    }
  }
  else {
    if ((Operation["x_nombre"+etape]==i)&&(Operation["y_nombre"+etape]==j)) {
    if (etape==1) {
      if (document.FormPrio.radio_prio[1].checked) { foisClick(window.document.images["image_fois"]); }
      else {
        if (effacage_auto) { Effacer(); }
        else {
          if (eviter_alert["erreur"] == false) {
            confirmbox( "ATTENTION :" , "- les trois nombres doivent être voisins<BR/>- ils doivent être alignés.<BR/><BR/><CENTER>Cliquer sur OK pour continuer à être informé en cas d'erreur<BR/><I>ou sur ANNULER pour effacer automatiquement à la prochaine erreur.</I></CENTER>" , 220 , 450 , "erreur");
          }
        }
      }
    }
    else if (etape==2) { plusmoinsClick(window.document.images["image_plusmoins"]); }
    else if (etape==3) { Verifier(); }
    }
    else {
    if ((debut_plateau == 1)&&((i == 0)||(j == 0))) {
      //alertbox("ATTENTION :","<CENTER>Ce n'est pas un nombre du plateau de jeu !</CENTER>",120,300);
    }
    else {
      if (effacage_auto) { Effacer(); }
      else {
        //avant    alertbox('ATTENTION :','- les trois nombres doivent être voisins<BR/>- ils doivent être alignés.<BR/>',140,300);
        if (eviter_alert["erreur"] == false) {
          confirmbox( "ATTENTION :" , "- les trois nombres doivent être voisins<BR/>- ils doivent être alignés.<BR/><BR/><CENTER>Cliquer sur OK pour continuer à être informé en cas d'erreur<BR/><I>ou sur ANNULER pour effacer automatiquement à la prochaine erreur.</I></CENTER>" , 220 , 450 , "erreur");
        }
      }
    }
    }
  }
  }
  else {
  etape++;
    Grille[i][j]=true;
    if (etape==1) {
    image_cliquee_1 = image;
    image.src=chemin+"rond"+t_case+".gif";
      for (var c = debut_plateau; c <= fin_plateau; c++) {
        for (var l = debut_plateau; l <= fin_plateau; l++) {
          if ((c<(i-2))||(c>(i+2))||(l<(j-2))||(l>(j+2))) { Grille2(c,l); }
      }}
    if ((i-2)>=debut_plateau) {
      if ((j-1)>=debut_plateau) { Grille2(i-2,j-1); }
      if ((j+1)<=fin_plateau) { Grille2(i-2,j+1); }
    }
    if ((i-1)>=debut_plateau) {
      if ((j-2)>=debut_plateau) { Grille2(i-1,j-2); }
      if ((j+2)<=fin_plateau) { Grille2(i-1,j+2); }
    }
    if ((i+1)<=fin_plateau) {
      if ((j-2)>=debut_plateau) { Grille2(i+1,j-2); }
      if ((j+2)<=fin_plateau) { Grille2(i+1,j+2); }
    }
    if ((i+2)<=fin_plateau) {
      if ((j-1)>=debut_plateau) { Grille2(i+2,j-1); }
      if ((j+1)<=fin_plateau) { Grille2(i+2,j+1); }
    }
// ci-dessous la gestion des "coins" qui avait été oubliée. exemple : si B1 cliqué alors impossible de réaliser un trio avec A2
    if (((i-1)==debut_plateau) && (j==debut_plateau)) { Grille2(i-1,j+1); }
    if (((j-1)==debut_plateau) && (i==debut_plateau)) { Grille2(i+1,j-1); }
    if (((i+1)==fin_plateau) && (j==debut_plateau)) { Grille2(i+1,j+1); }
    if (((j-1)==debut_plateau) && (i==fin_plateau)) { Grille2(i-1,j-1); }
    if (((j+1)==fin_plateau) && (i==debut_plateau)) { Grille2(i+1,j+1); }
    if (((i-1)==debut_plateau) && (j==fin_plateau)) { Grille2(i-1,j-1); }
    if (((i+1)==fin_plateau) && (j==fin_plateau)) { Grille2(i+1,j-1); }
    if (((j+1)==fin_plateau) && (i==fin_plateau)) { Grille2(i-1,j+1); }
  }
  else { if (etape==2) {
    image_cliquee_2 = image;
    image.src=chemin+"rond"+t_case+".gif";
    max_i = Math.min(fin_plateau,Operation["x_nombre1"]+2);
    min_i = Math.max(debut_plateau,Operation["x_nombre1"]-2);
    max_j = Math.min(fin_plateau,Operation["y_nombre1"]+2);
    min_j = Math.max(debut_plateau,Operation["y_nombre1"]-2);
    for (var c = min_i; c <= max_i; c++) {for (var l = min_j; l <= max_j; l++) { if (Grille[c][l] == false) { Grille2(c,l); }}} // seules les cases du carré entourant le premier nombre sont encore cliquables on se contente donc de cocher toutes celles-ci (pour les rendres noncliquables) et on les cache sauf celles déjà cochée (dont le premiers et le deuxième nombre)
    max_i = Math.max(i,Operation["x_nombre1"]);
    min_i = Math.min(i,Operation["x_nombre1"]);
    max_j = Math.max(j,Operation["y_nombre1"]);
    min_j = Math.min(j,Operation["y_nombre1"]);
    if (max_j==min_j) { // les cases sont sur la même ligne
      if ((min_i+1)==max_i) { // les cases sont côte à côte
      if ((min_i-1)<debut_plateau) { CauchageAuto(max_i+1,j); }
      else { if ((max_i+1)>fin_plateau) { CauchageAuto(min_i-1,j); }
      else { GrilleOK(min_i-1,j); GrilleOK(max_i+1,j); } //cases collées mais pas au bord
      }
        }
    else {
            CauchageAuto(min_i+1,j);
      }
    }
    else {
    if (max_i==min_i) {
      if ((min_j+1)==max_j) {
        if ((min_j-1)<debut_plateau) { CauchageAuto(i,max_j+1); }
        else { if ((max_j+1)>fin_plateau) { CauchageAuto(i,min_j-1); }
        else { GrilleOK(i,min_j-1); GrilleOK(i,max_j+1); } //cases collées mais pas au bord
        }
      }
      else {
            CauchageAuto(i,min_j+1);
      }
    }
    else {
      if (((i-Operation["x_nombre1"])*(j-Operation["y_nombre1"]))>0) { //l'une des cases se trouve en haut à gauche de l'autre
        if ((min_i+1)==max_i) {
          if (((min_i-1)<debut_plateau)||((min_j-1)<debut_plateau)) { CauchageAuto(max_i+1,max_j+1); }
          else { if (((max_i+1)>fin_plateau)||((max_j+1)>fin_plateau)) { CauchageAuto(min_i-1,min_j-1); }
          else { GrilleOK(max_i+1,max_j+1); GrilleOK(min_i-1,min_j-1); } //cases collées mais pas au bord
          }
        }
        else {
          CauchageAuto(min_i+1,min_j+1);
        }
      }
      else {
        if ((min_i+1)==max_i) {
          if (((min_i-1)<debut_plateau)||((max_j+1)>fin_plateau)) { CauchageAuto(max_i+1,min_j-1); }
          else { if (((max_i+1)>fin_plateau)||((min_j-1)<debut_plateau)) { CauchageAuto(min_i-1,max_j+1); }
          else { GrilleOK(max_i+1,min_j-1); GrilleOK(min_i-1,max_j+1); } //cases collées mais pas au bord
          }
        }
        else {
          CauchageAuto(min_i+1,max_j-1);
        }
      }
    }
    }
  }
  else { image_cliquee_3 = image;   image.src=chemin+"rondv"+t_case+".gif"; if (cacher_case_active) { CauchageAuto(0,0); } }} // CauchageAuto(0,0) est là simplement pour cacher une éventuelle dernière case, les paramètres ne seront pas lus d'où le 0,0
// Operation["x_nombre1"] et ["y_nombre1"] contiennent x et y du 1er facteur ... ["y_nombre3"] ... [0] contient "+" ou "-"
  Operation["x_nombre"+etape]=i;
  Operation["y_nombre"+etape]=j;
  document.getElementById("nombre"+etape).firstChild.nodeValue=Plateau[partie_actuelle][i][j];
  if (nombre3_coche_auto) { etape++; }
  if (((verification_auto) && (etape == 3)) && !(document.FormPrio.radio_prio[1].checked)) { Verifier_automatiquement(); }
  } // fin du else qui se trouve après les erreurs
}

function plusmoinsClick(image) {
  if (document.FormPrio.radio_prio[1].checked) {
  if ((Operation[0]=="0")||(Operation[0]=="x")) {
    image.src=chemin+"plus.gif";
    Operation[0]="+";}
  else if (Operation[0]=="+") {
    image.src=chemin+"moins.gif";
    Operation[0]="-";}
  else if (Operation[0]=="-") {
    image.src=chemin+"diviser_vert.png";
    Operation[0]=":";}
  else if (Operation[0]==":") {
    image.src=chemin+"fois_vert.png";
    Operation[0]="x";}
  }
  else {
  if (verification_auto) {
    alertbox('INFORMATION :','Le mode "vérification automatique" est activée.<BR/>Il est donc inutile de choisir entre + et -.<BR/>',140,300);
  }
  else {
    if ((Operation[0]=="0")||(Operation[0]=="-")) {
      image.src=chemin+"plus.gif";
      Operation[0]="+";}
    else {
      image.src=chemin+"moins.gif";
      Operation[0]="-";
    }
  }
  }
}

function foisClick(image) {
  if (document.FormPrio.radio_prio[1].checked) {
  Operation["fois"] = (Operation["fois"]+1) % 4;
    image.src=chemin+Operation["fois"]+".png";
  }
}

function ChangePrio(nb) {
  if (nb == 0) {
  Operation["fois"] = 0;
    window.document.images["image_fois"].src = chemin+"0.png";
  Operation[0] = "0";
  window.document.images["image_plusmoins"].src=chemin+"plusmoins.gif";
    window.document.images["image_fois"].src = chemin+"0.png";
  }
  else {
  alertbox("INFORMATION :","<CENTER>Vous pouvez à présent choisir librement parmi les 4 opérations<BR/> mais si votre trio ne commence par une multiplication ou n'est pas suivi d'une addition<BR/> ou d'une soustraction alors il ne vous rapportera qu'un seul point.</CENTER>",150,500);
  }
}

  Initialisation();
  InitCalques(1,1,910,570);
  ChangeTableau();
  ChargeGrille();

//-->
</script>
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /><!--<div class="clear"></div>-->
<div id="tab-container-1" class="tab-container">

                  <ul id="tab-container-1-nav" class="yetii">
                  <li><a href="#tab1">Trios déjà validés</a></li><li><a href="#tab2">Mode d'emploi</a></li><li><a href="#tab3">Les variantes</a></li><li><a href="#tab4">LES RECORDS</a></li><li><a href="#tab5">Options</a></li><li><a href="#tab6">Pour la Classe</a></li></ul><div class="tab" id="tab1">
<center><div id="divJeux" style="overflow:auto;width:850px; height:auto; ">&nbsp;</div></center><center><form name="form_divJeux"><input checked="checked" name="affichage" onchange="Change_form_divJeux();" type="checkbox" /><i>décocher cette case pour désactiver cet affichage qui pourrait ralentir le jeu quand la partie devient longue</i></form></center>
</div><div class="tab" id="tab2">
  <p align="justify" class="infotip-jck"><u>Comment jouer au trio classique ?</u><br />
    - sélectionner les deux premiers nombres qui doivent être multipliés puis le troisième nombre qui sera additionné ou soustrait au résultat de cette multiplication.<br />
    - changer, si nécessaire, le signe de la deuxième opération en cliquant sur le signe "+" ou "-" ("+/-" en début de partie).<br />
    - cliquer sur le bouton "VERIFIER" ; si <b>le résultat de l'opération est égal à la cible proposée alors le score augmente de 2 points quand la cible est inférieure à 50 et de 3 points (voire davantage) si elle dépasse 50</b> (il est possible de changer de limite en cours de partie) et une nouvelle cible est proposée ; sinon les nombres sélectionnés sont effacés et la cible est conservée.<br />
    - si un même nombre cible apparaît une 2ème fois il faut trouver un trio différent de celui validé la 1ère fois et ainsi de suite...<br />
    - en cas de difficulté à atteindre la cible, il est possible de <b>forcer le changement de cible par un nouveau tirage au sort mais une pénalité sera alors appliquée au score qui sera diminué de 1 point.</b><br /><br />
  <u>Nouveau mode de jeu "Liberté totale" (sur une proposition d'Eric Trouillot, créateur de <a href="index.php?option=com_content&view=article&id=650:mathador-chrono&catid=41&Itemid=219" target="_blank">"Mathador"</a>) :</u><br/>
  En activant cette option, vous avez à présent la possibilité de choisir librement les deux opérations. Pour éviter les va-et-vient entre la grille et les opérations, une nouvelle manière de jouer est également proposée :<br />
  - cliquer sur le 1er nombre puis recliquer à nouveau dessus autant de fois que nécessaire pour choisir la 1ère opération.<br />
  - cliquer sur le 2ème nombre puis recliquer dessus autant de fois que nécessaire pour choisir la 2ème opération.<br />
  - cliquer sur le 3ème nombre puis recliquer une seconde fois dessus pour vérifier le trio (inutile d'utiliser le bouton "VERIFIER").<br />
<!-- LE CHOIX EST PLACE LA TEMPORAIREMENT PENDANT LE CONCOURS
<CENTER>ATTENTION : NE PAS UTILISER L'OPTION CI-DESSOUS POUR LA VARIANTE CONCOURS
  <br /><FORM name='FormPrio'>Choix du mode de jeu : <INPUT type='radio' name='radio_prio' value='originale' onclick='ChangePrio(0);' checked/>Règle d'origine (Multiplication puis addition ou soustraction)<INPUT type='radio' name='radio_prio' value='libre' onclick='ChangePrio(1);'/>Liberté totale (possibilité d'utiliser les 4 opérations +, -, x et :)</FORM></CENTER>
-->
  </p>
</div><div class="tab" id="tab3">
  <p align="justify" class="infotip-jck">
    <u><b>Un</b> (trio) <b>pour toutes</b> (les cibles) :</u> le cadre noir ne contient plus véritablement un score mais les 91 cibles possibles (ce nombre n'est pas modifiable dans cette variante sauf si vous choisissez dans l'onglet "Options" de remplir votre plateau avec des nombres relatifs), le but est alors d'essayer de trouver un seul trio pour chacune de ces cibles.<i> Il est possible de sélectionner directement dans la zone score la cible à atteindre ou d'utiliser le bouton "CHANGER LA CIBLE" pour passer à la suivante.</i><br /><br />
    <u><b>Tous</b> (les trios possibles) <b>pour une</b> (cible) :</u> cette fois-ci la cible est fixée "définitivement" dès le début de la partie et le but est alors d'essayer de trouver tous les trios qui l'atteignent. <i>Le bouton "CHANGER LA CIBLE" n'est plus actif quand la partie est commencée, pour modifier la cible il faudra recommencer entièrement la partie en utilisant le bouton "REINITIALISER TOUTES LES PARTIES" dans l'onglet "Options". C'est dans cet onglet que vous trouverez également la possibilité d'obtenir une cible avec un minimum de trios valables pour le plateau en cours.</i><br /><br />
    <u><b>Pour la classe</b> :</u> cette dernière variante est adaptée pour une pratique en classe car elle laisse toute liberté à l'enseignant qui peut conserver une cible aussi longtemps qu'il le souhaite ou en tirer au sort une nouvelle avec le bouton "CHANGER LA CIBLE" voire la sélectionner lui même dans la zone SCORE (il n'y a plus de notion de score dans cette variante). <i>Pour changer le plateau, il faudra utiliser le bouton "REINITIALISER TOUTES LES PARTIES" de l'onglet "Options" dans lequel vous pourrez également le personnaliser. L'onglet "Pour la Classe" contient aussi deux fonctionnalités réservées à une utilisation en classe...</i><br /><br />
    <u><b>Duel Ping-Pong</b> :</u> il s'agit d'une version très différente qui se trouve dans <a href="http://acamus.net/index.php?option=com_content&view=article&id=412:trio-duel-ping-pong&catid=41&Itemid=219" target="_blank">cet article</a> où il est à présent possible de s'affronter à 2. <i>Il suffit pour cela que les deux joueurs se placent côte à côte face à l'écran avec la souris ou la tablette placée à portée de main des deux joueurs. A chaque manche, les deux adversaires doivent alors, à tour de rôle, tenter d'atteindre la cible qui passera de l'un à l'autre (le nombre de point à gagner diminue au fur et à mesure que le temps s'écoule).</i>
  </p>
</div><div class="tab" id="tab4">
<table cellspacing="5" align="center" border="5" width="100%">
  <tbody align="left">
    <tr align="center" width="100%">
      <td colspan="3"><center>RECORDS AVEC LA VARIANTE <b>CLASSIQUE</b></center>
      </td>
    </tr>
    <tr align="center">
      <td width="10%"><CENTER><b>1 395 points</b></CENTER>
      </td>
      <td width="30%"><b>Axel P.</b> (5E 5 BACON) le 03/08/2016
      </td>
      <td width="60%"><I>avec 609 trios validés</I></td>
    </tr>
    <tr align="center">
      <td width="10%"><CENTER><b>1 254 points</b></CENTER>
      </td>
      <td width="30%"><b>Mickaël G.</b> (6E 6 ULYSSE) le 28/05/2015
      </td>
      <td width="60%"><I>avec 608 trios validés</I></td>
    </tr>
    <tr align="center">
      <td width="10%"><CENTER><b>661 points</b></CENTER>
      </td>
      <td width="30%"><b>Axel P.</b> (6E 6 ULYSSE) le 06/02/2015
      </td>
      <td width="60%"><I>avec 307 trios validés</I></td>
    </tr>
    <tr align="center">
      <td width="10%"><CENTER><b>471 points</b></CENTER>
      </td>
      <td width="30%"><b>Valentin F.</b> (4E 2 DEGAS) le 13/01/2015
      </td>
      <td width="60%"><I>avec 234 trios validés</I></td>
    </tr>
    <tr align="center">
      <td width="10%"><CENTER><b>387 points</b></CENTER>
      </td>
      <td width="30%"><b>Adrien M.</b> (4E 2 DEGAS) le 25/11/2014
      </td>
      <td width="60%"><I>avec 191 trios validés</I></td>
    </tr>
    <tr align="center">
      <td colspan="3"><center>RECORDS AVEC LA VARIANTE <a href="http://acamus.net/index.php?option=com_content&view=article&id=326:finale-trio&catid=41&Itemid=219" target="_blank"><b>FINALE</b></a> (homologué en 30 min chrono)</center>
      </td>
    </tr>
    <tr align="center">
      <td width="10%"><CENTER><b>285 points</b></CENTER>
      </td>
      <td width="30%"><b>Axel P.</b> (4E 5 TUBMAN) le 06/04/2017
      </td>
      <td width="60%"><I>réalisé lors de la finale 2017 du concours <a href="http://acamus.net/index.php?option=com_content&view=article&id=322:concours-trio&catid=41&Itemid=219" target="_blank">"Si tu gagnes au TRIO alors tu passes PRIO..."</a></I></td>
    </tr>
    <tr align="center">
      <td width="10%"><CENTER><b>248 points</b></CENTER>
      </td>
      <td width="30%"><b>Matthew G.</b> (3E 1 ORWELL) le 31/03/2016
      </td>
      <td width="60%"><I>réalisé lors de la finale 2016 du concours <a href="http://acamus.net/index.php?option=com_content&view=article&id=322:concours-trio&catid=41&Itemid=219" target="_blank">"Si tu gagnes au TRIO alors tu passes PRIO..."</a></I></td>
    </tr>
    <tr align="center">
      <td width="10%"><CENTER><b>187 points</b></CENTER>
      </td>
      <td width="30%"><b>Mickaël G.</b> (6E 6 ULYSSE) le 02/04/2015
      </td>
      <td width="60%"><I>réalisé lors de la finale 2015 du concours <a href="http://acamus.net/index.php?option=com_content&view=article&id=322:concours-trio&catid=41&Itemid=219" target="_blank">"Si tu gagnes au TRIO alors tu passes PRIO..."</a></I></td>
    </tr>
    <tr align="center">
      <td width="10%"><CENTER><b>152 points</b></CENTER>
      </td>
      <td width="30%"><b>Théo L.</b> (ex 4E 5 RONTGEN) le 27/03/2014
      </td>
      <td width="60%"><I>réalisé lors de la finale 2014 du concours <a href="http://acamus.net/index.php?option=com_content&view=article&id=322:concours-trio&catid=41&Itemid=219" target="_blank">"Si tu gagnes au TRIO alors tu passes PRIO..."</a></I></td>
    </tr>

  </tbody>
</table>
</div><div class="tab" id="tab5">
<FORM name='FormConfig'>
  <FIELDSET class='fieldsetm'><LEGEND>Ergonomie (les deux dernières options sont inactives en mode "Liberté totale"):</LEGEND>
    <input type="checkbox" name="form_cacher_case_active" onchange="Effacer(); cacher_case_active = !cacher_case_active;" checked/>Griser les cases qui ne peuvent plus former de trio avec les nombres sélectionnés. A décocher si cela ralentit trop votre navigateur.<br/>
    <input type="checkbox" name="form_effacage_auto" onchange="effacage_auto = !effacage_auto; if (effacage_auto==false) { eviter_alert['erreur'] = false; }"/>Effacer automatiquement dès qu'une "mauvaise" case est cliquée (exemple : cliquer 2 fois sur un même nombre pour effacer le trio commencé).<br/>
    <input type="checkbox" name="form_cochage_auto" onchange="cochage_auto = !cochage_auto;"/>Sélectionner automatiquement le 3ème nombre quand il n'y a plus le choix (exemple : après A1 et A3, le dernier nombre est forcément A2).<br/>
    <input type="checkbox" name="form_plusmoins_auto" onchange="Basculer_verification_automatiquement();"/>Vérifier automatiquement le trio dès la sélection du 3ème nombre sans devoir cliquer sur VERIFIER (le signe + ou - est automatiquement déterminé).<br/>
  </FIELDSET>
  <FIELDSET class='fieldsetm'><LEGEND>Composition du plateau et des cibles à atteindre :</LEGEND>
    Les nombres du plateau sont compris entre <INPUT type='text' name='borne_inf' onchange="bornes_change();" size=1 value='1'> et <INPUT type='text' name='borne_sup' onchange="bornes_change();" size=1 value='9'> (bornes incluses et en valeur absolue pour les relatifs).<br/>
    <input type="checkbox" name="form_cibles_possibles" onchange="Basculer_cibles_possibles_uniquement();" />Proposer à l'avenir des cibles qui ont encore au moins <INPUT type='text' name='min_cibles' size=2 value='1' onchange="if (((cibles_possibles_uniquement) && (partie_actuelle != 'UnPourToutes')) && (partie_actuelle != 'Concours')) { ChercherCiblesPossibles(); }"> trio(s) présent(s) sur le plateau (non valable avec "Un Pour Toutes").<br/>
  </FIELDSET>
  <CENTER><INPUT type='button' value='REINITIALISER TOUTES LES PARTIES' onclick='RecommencerLesParties(10);'></CENTER>
</FORM>
</div><div class="tab" id="tab6">
  <CENTER>Montrer un trio correspondant à la cible actuelle (recliquer pour en montrer un autre puis ainsi de suite pour tous les voir) : <INPUT type='button' value='MONTRER UN TRIO' onclick='VoirTrio();'></CENTER>
  <CENTER>Voir, cible par cible, le nombre de trios encore présents sur ce plateau (ceux déjà validés sont décomptés) : <INPUT type='button' value='VOIR LE NOMBRE DE TRIOS' onclick='VoirNombreTrios();'></CENTER>
  <CENTER><i>Ces fonctions sont réservées à la variante "Pour la classe". D'autres options sont dans l'onglet "Options".</i></CENTER>
</div></div>

<script type="text/javascript">
var tabber1 = new Yetii({id: 'tab-container-1'});


</script>                    

		</body>
	</html>
